//apply plugin: 'com.moowork.node'
//apply plugin: 'org.jetbrains.kotlin.frontend'
//
//buildscript {
//    repositories {
//        mavenCentral()
//        maven { url "https://dl.bintray.com/kotlin/kotlin-eap" }
//        maven { url "https://plugins.gradle.org/m2/"           }
//    }
//
//    dependencies {
//        classpath 'com.moowork.gradle:gradle-node-plugin:1.2.0'
//        classpath "org.jetbrains.kotlin:kotlin-frontend-plugin:0.0.22"
//    }
//}
//
//dependencies {
//    testCompile "org.jetbrains.kotlin:kotlin-test-js:$kotlin_version"
//}
//
//kotlinFrontend {
//    npm {
//        devDependency("mocha"             )
////        devDependency("ts2kt"             )
//        devDependency("ts-mockito"        )
//        devDependency("source-map-support")
//    }
//}
//
//task populateNodeModules(type: Copy, dependsOn: compileKotlin2Js) {
//    from compileKotlin2Js.destinationDir
//
//    configurations.testCompile.each {
//        from zipTree(it.absolutePath).matching { include '*.js' }
//    }
//
//    into "${buildDir}/node_modules"
//}
//
//task runMocha(type: NodeTask, dependsOn: [compileTestKotlin2Js, populateNodeModules]) {
//    script = file('build/node_modules/.bin/mocha')
//    args   = [compileTestKotlin2Js.outputFile]
//}
//
//test.dependsOn runMocha