buildscript {
    ext.kotlin_version = '1.2.0-beta-31'

    repositories {
        mavenCentral()
        mavenLocal()
        maven { url "https://dl.bintray.com/kotlin/kotlin-eap"     }
        maven { url "https://dl.bintray.com/kotlin/kotlin-eap-1.2" }
    }

    dependencies {
        classpath "org.jetbrains.kotlin:kotlin-gradle-plugin:$kotlin_version"
    }
}

subprojects {
    apply plugin: 'idea'
    apply plugin: 'maven'
    apply plugin: 'kotlin2js'

    version = '1.0'
    group   = 'com.nectar.doodle'

    sourceSets {
        main.kotlin.srcDirs    += "src/main/headers"
        main.resources.srcDirs += "resources"
    }

    compileKotlin2Js {
        kotlinOptions.metaInfo              = true
        kotlinOptions.sourceMap             = true
        kotlinOptions.moduleKind            = "commonjs"
        kotlinOptions.sourceMapEmbedSources = "always"
    }

    dependencies {
        repositories {
            mavenCentral()
            maven { url "https://dl.bintray.com/kotlin/kotlin-eap-1.2" }
        }

        compile "org.jetbrains.kotlin:kotlin-stdlib-js:$kotlin_version"
    }
}