<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-rendering" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.7.0">
<title data-rh="true">Rendering | Doodle</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://nacular.github.io/doodle/img/doodle.png"><meta data-rh="true" name="twitter:image" content="https://nacular.github.io/doodle/img/doodle.png"><meta data-rh="true" property="og:url" content="https://nacular.github.io/doodle/docs/rendering"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="og:image:width" content="380"><meta data-rh="true" name="og:image:height" content="78"><meta data-rh="true" name="keywords" content="web, kotlin, javascript, wasm, framework, ui, user interface, programming, development, desktop"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Rendering | Doodle"><meta data-rh="true" name="description" content="Doodle automatically manages rendering of Views, and this covers almost all use-cases. Each  draws its content to a Canvas provided during calls to the  method. This either presents the View&#x27;s contents on the screen for the first time or updates them on subsequent calls."><meta data-rh="true" property="og:description" content="Doodle automatically manages rendering of Views, and this covers almost all use-cases. Each  draws its content to a Canvas provided during calls to the  method. This either presents the View&#x27;s contents on the screen for the first time or updates them on subsequent calls."><link data-rh="true" rel="icon" href="/doodle/img/favicon.png"><link data-rh="true" rel="canonical" href="https://nacular.github.io/doodle/docs/rendering"><link data-rh="true" rel="alternate" href="https://nacular.github.io/doodle/docs/rendering" hreflang="en"><link data-rh="true" rel="alternate" href="https://nacular.github.io/doodle/docs/rendering" hreflang="x-default"><link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=G-N4LZ5T22WN"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-N4LZ5T22WN",{anonymize_ip:!0})</script>




<script src="https://unpkg.com/kotlin-playground@1"></script><link rel="stylesheet" href="/doodle/assets/css/styles.ae3d4d5a.css">
<script src="/doodle/assets/js/runtime~main.b445f854.js" defer="defer"></script>
<script src="/doodle/assets/js/main.b2c734db.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();null!==e?t(e):window.matchMedia("(prefers-color-scheme: dark)").matches?t("dark"):(window.matchMedia("(prefers-color-scheme: light)").matches,t("light"))}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/doodle/"><div class="navbar__logo"><img src="/doodle/img/doodle.svg" alt="Doodle Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/doodle/img/doodle.svg" alt="Doodle Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div></a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/nacular/doodle" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-github-link" aria-label="GitHub repository"></a><a href="https://kotlinlang.slack.com/messages/doodle" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-slack-link" aria-label="Slack channel"></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite" aria-pressed="false"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/doodle/docs/introduction">Hello Doodle</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/doodle/docs/whatsnew">Whats New âœ¨</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/doodle/docs/migrating/0.10.x_0.11.0">Migrating to 0.11.0</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/doodle/docs/installation">Installation</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" href="/doodle/docs/applications">Fundamentals</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/doodle/docs/applications">Applications</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/doodle/docs/display">Displays</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/doodle/docs/views">Views</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/doodle/docs/rendering">Rendering</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/doodle/docs/layout">Layout</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/doodle/docs/userinput">User Input</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/doodle/docs/transforms">Advanced Topics</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="true" href="/doodle/docs/ui_components/overview">Component Library</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/doodle/docs/ui_components/overview">Catalog</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/doodle/docs/ui_components/form">Forms</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/doodle/docs/ui_components/form_controls">Form Controls</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/doodle/docs/troubleshooting/gotchas">Troubleshoot</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/doodle/docs/platform_specific/desktop">Platform Specific</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a href="https://nacular.github.io/doodle-tutorials" target="_blank" rel="noopener noreferrer" class="menu__link menuExternalLink_NmtK">Tutorials<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a href="https://nacular.github.io/doodle-api/" target="_blank" rel="noopener noreferrer" class="menu__link menuExternalLink_NmtK">API Docs<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Rendering</h1></header>
<p>Doodle automatically manages rendering of <code>Views</code>, and this covers almost all use-cases. Each <code><a href="https://nacular.github.io/doodle-api/core/io.nacular.doodle.core/-view" target="_blank" rel="noopener noreferrer">View</a></code> draws its content to a <a href="#the-canvas">Canvas</a> provided during calls to the <code><a href="https://nacular.github.io/doodle-api/core/io.nacular.doodle.core/-view/render" target="_blank" rel="noopener noreferrer">render</a></code> method. This either presents the View&#x27;s contents on the screen for the first time or updates them on subsequent calls.</p>
<p>Doodle calls <code>render</code> whenever a <code>View</code> needs a visual update, which includes changes to its <code><a href="https://nacular.github.io/doodle-api/core/io.nacular.doodle.core/-view/size" target="_blank" rel="noopener noreferrer">size</a></code> or it becoming <code><a href="https://nacular.github.io/doodle-api/core/io.nacular.doodle.core/-view/visible" target="_blank" rel="noopener noreferrer">visible</a></code>. This means you do not need to call <code>render</code> yourself. But there might be cases when you want to request that a View re-renders. You can do this by calling <code><a href="https://nacular.github.io/doodle-api/core/io.nacular.doodle.core/-view/rerender" target="_blank" rel="noopener noreferrer">rerender</a></code>.</p>
<p>This is an example of a simple <code>View</code> that draws a rectangle filled with <code><a href="https://nacular.github.io/doodle-api/core/io.nacular.doodle.drawing/-color/-companion/-blue" target="_blank" rel="noopener noreferrer">Blue</a></code> <code><a href="https://nacular.github.io/doodle-api/core/io.nacular.doodle.drawing/-color-paint" target="_blank" rel="noopener noreferrer">ColorPaint</a></code> that covers its bounds.</p>
<code theme="darcula" mode="kotlin" data-highlight-only="true">import io.nacular.doodle.core.View
import io.nacular.doodle.drawing.Canvas
import io.nacular.doodle.drawing.Color.Companion.Blue
import io.nacular.doodle.drawing.paint

//sampleStart
class RectView: View() {
    override fun render(canvas: Canvas) {
        canvas.rect(bounds.atOrigin, Blue.paint)
    }
}
//sampleEnd</code>
<div class="theme-admonition theme-admonition-tip admonition_xJq3 alert alert--success"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>tip</div><div class="admonitionContent_BuS1"><p><code><a href="https://nacular.github.io/doodle-api/core/io.nacular.doodle.core/-view/render" target="_blank" rel="noopener noreferrer">render</a></code> is automatically called on <code><a href="https://nacular.github.io/doodle-api/core/io.nacular.doodle.core/-view/size" target="_blank" rel="noopener noreferrer">size</a></code> changes and <code><a href="https://nacular.github.io/doodle-api/core/io.nacular.doodle.core/-view/visible" target="_blank" rel="noopener noreferrer">visible</a></code> changing to <code>true</code></p></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="the-canvas">The Canvas<a href="#the-canvas" class="hash-link" aria-label="Direct link to The Canvas" title="Direct link to The Canvas">â€‹</a></h2>
<p>All drawing is done via the <code><a href="https://nacular.github.io/doodle-api/core/io.nacular.doodle.drawing/-canvas" target="_blank" rel="noopener noreferrer">Canvas</a></code> API, which offers a rich set of operations for geometric shapes, paths, images, and text. It also supports different <code><a href="https://nacular.github.io/doodle-api/core/io.nacular.doodle.drawing/-paint" target="_blank" rel="noopener noreferrer">Paint</a></code> types (i.e. <code><a href="https://nacular.github.io/doodle-api/core/io.nacular.doodle.drawing/-color-paint" target="_blank" rel="noopener noreferrer">ColorPaint</a></code>, <code><a href="https://nacular.github.io/doodle-api/core/io.nacular.doodle.drawing/-linear-gradient-paint" target="_blank" rel="noopener noreferrer">LinearGradientPaint</a></code>, <a href="/doodle/docs/rendering#patterns">PatternPaint</a>, etc.) for filling regions.</p>
<p>The <code>Canvas</code> provided to a <code>View</code>&#x27;s <code><a href="https://nacular.github.io/doodle-api/core/io.nacular.doodle.core/-view/render" target="_blank" rel="noopener noreferrer">render</a></code> method has a coordinate system that anchors <code>0,0</code> on the <code>Canvas</code> to the <code>View</code>&#x27;s origin. The Canvas itself extends in all directions beyond the bounds of the View; but the contents drawn to it will be clipped to the view&#x27;s bounds by default.</p>
<div class="theme-admonition theme-admonition-tip admonition_xJq3 alert alert--success"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>tip</div><div class="admonitionContent_BuS1"><p>Sub-classes can disable clipping by setting <code><a href="https://nacular.github.io/doodle-api/core/io.nacular.doodle.core/-view/clip-canvas-to-bounds" target="_blank" rel="noopener noreferrer">clipCanvasToBounds</a></code> = <code>false</code>.</p></div></div>
<p>Most Views require geometric regions on their Canvas to be filled with some color, gradient, texture, etc.. Therefore, many Canvas APIs take a <code><a href="https://nacular.github.io/doodle-api/core/io.nacular.doodle.drawing/-paint" target="_blank" rel="noopener noreferrer">Paint</a></code> parameter that determines how the inner regions of these shapes are filled. There are several built-in <code>Paint</code> types to choose from.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="transformations">Transformations<a href="#transformations" class="hash-link" aria-label="Direct link to Transformations" title="Direct link to Transformations">â€‹</a></h3>
<p>The <code>Canvas</code> can also be transformed using any <code><a href="https://nacular.github.io/doodle-api/core/io.nacular.doodle.drawing/-affine-transform/" target="_blank" rel="noopener noreferrer">AffineTransform</a></code>. These are linear transformation which encapsulate translation, scaling, and rotation in matrices. You can combine these transforms into more complex ones directly, or apply them to a <code>Canvas</code> in a nested fashion to get similar results</p>
<p>This <code>View</code> flips the Canvas horizontally around its mid-point and draws some text.</p>
<code theme="darcula" mode="kotlin" data-highlight-only="true">package rendering

import io.nacular.doodle.core.View
import io.nacular.doodle.drawing.Canvas
import io.nacular.doodle.drawing.Color.Companion.Black
import io.nacular.doodle.drawing.text

//sampleStart
class MyView: View() {
    override fun render(canvas: Canvas) {
        canvas.flipHorizontally(around = width / 2) {
            text(&quot;hello&quot;, color = Black)
        }
    }
}
//sampleEnd</code>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="3d-rendering">3D rendering<a href="#3d-rendering" class="hash-link" aria-label="Direct link to 3D rendering" title="Direct link to 3D rendering">â€‹</a></h3>
<p><a href="/doodle/docs/rendering#the-canvas">Canvas</a> offers basic 3D capabilities through the use of <code><a href="https://nacular.github.io/doodle-api/core/io.nacular.doodle.drawing/-affine-transform/" target="_blank" rel="noopener noreferrer">AffineTransform</a></code>s and <code><a href="https://nacular.github.io/doodle-api/core/io.nacular.doodle.core/-camera" target="_blank" rel="noopener noreferrer">Camera</a></code>s. This enables <code><a href="https://nacular.github.io/doodle-api/core/io.nacular.doodle.core/-view" target="_blank" rel="noopener noreferrer">View</a></code>s to display content in a shared 3D space.</p>
<p>The following examples has a View that draws a 3D cube. The cube looks like a 3D object even though it is flat on the View&#x27;s surface. The controls (which are overlaid on the View) let you change the starting transform applied to the cube&#x27;s back face (which changes the cube&#x27;s overall transform), the folding angle of each face, and the camera used to create the perspective.</p>
<div class="tabs-container tabList__CuJ"><ul role="tablist" aria-orientation="horizontal" class="tabs"><li role="tab" tabindex="0" aria-selected="true" class="tabs__item tabItem_LNqP tabs__item--active">Demo</li><li role="tab" tabindex="-1" aria-selected="false" class="tabs__item tabItem_LNqP">Cube.kt</li></ul><div class="margin-top--md"><div role="tabpanel" class="tabItem_Ymn6"><div class="doodle_u3ra"><div style="position:relative;height:500px"></div></div></div><div role="tabpanel" class="tabItem_Ymn6" hidden=""><code theme="darcula" mode="kotlin" data-highlight-only="true">package io.nacular.doodle.docs.utils

import io.nacular.doodle.core.Camera
import io.nacular.doodle.core.View
import io.nacular.doodle.core.renderProperty
import io.nacular.doodle.drawing.AffineTransform
import io.nacular.doodle.drawing.Canvas
import io.nacular.doodle.drawing.Color
import io.nacular.doodle.drawing.Stroke
import io.nacular.doodle.drawing.paint
import io.nacular.doodle.geometry.Point
import io.nacular.doodle.geometry.Rectangle
import io.nacular.doodle.geometry.Size
import io.nacular.doodle.utils.ChangeObservers
import io.nacular.doodle.utils.ChangeObserversImpl
import io.nacular.measured.units.Angle
import io.nacular.measured.units.times

//sampleStart
class Cube: View() {
    private val side   = 100.0
    private val rect   = Rectangle(size = Size(side))
    private val stroke = Stroke(thickness = 2.0, fill = Color.Darkgray.paint)

    var foldAngle       by renderProperty(-90 * Angle.degrees) { _,_ -&gt; (changed as ChangeObserversImpl).invoke() }
    var canvasCamera    by renderProperty(Camera(Point.Origin, 1000.0)) { _,_ -&gt; (changed as ChangeObserversImpl).invoke() }
    var canvasTransform by renderProperty(AffineTransform.Identity.translate(z = -side / 2)) { _,_ -&gt; (changed as ChangeObserversImpl).invoke() }

    val changed: ChangeObservers&lt;Cube&gt; = ChangeObserversImpl(this)

    override fun render(canvas: Canvas) {
        var transform    = canvasTransform
        var faceLocation = Point((width - side) / 2, (height - side) / 2)

        drawFace(canvas, faceLocation, transform) // Back

        faceLocation += Point(x = side)
        transform    *= AffineTransform.Identity.rotateY(around = faceLocation, foldAngle)

        drawFace(canvas, faceLocation, transform) // Right

        faceLocation -= Point(y = side)

        drawFace(canvas, faceLocation, transform.rotateX(around = faceLocation + Point(y = side), foldAngle)) // Top

        faceLocation += Point(y = 2 * side)
        transform    *= AffineTransform.Identity.rotateX(around = faceLocation, -foldAngle)

        drawFace(canvas, faceLocation, transform) // Bottom

        faceLocation += Point(y = side)
        transform    *= AffineTransform.Identity.rotateX(around = faceLocation, -foldAngle)

        drawFace(canvas, faceLocation, transform) // Left

        faceLocation += Point(x = side)
        transform    *= AffineTransform.Identity.rotateY(around = faceLocation, foldAngle)

        drawFace(canvas, faceLocation, transform) // Front
    }

    private fun drawFace(canvas: Canvas, location: Point, transform: AffineTransform) {
        canvas.transform(transform, canvasCamera) { rect(rect.at(location), stroke) }
    }
}
//sampleEnd</code></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="filling-regions-with-paints">Filling regions with Paints<a href="#filling-regions-with-paints" class="hash-link" aria-label="Direct link to Filling regions with Paints" title="Direct link to Filling regions with Paints">â€‹</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="colors">Colors<a href="#colors" class="hash-link" aria-label="Direct link to Colors" title="Direct link to Colors">â€‹</a></h3>
<p>Doodle supports RGBA colors (via the <code><a href="https://nacular.github.io/doodle-api/core/io.nacular.doodle.drawing/-color" target="_blank" rel="noopener noreferrer">Color</a></code> class), for rendering content to the <code>Canvas</code> via paints like <code><a href="https://nacular.github.io/doodle-api/core/io.nacular.doodle.drawing/-color-paint" target="_blank" rel="noopener noreferrer">ColorPaint</a></code>. Colors can be created explicitly using hex notation, or you can use any of the built-in values (i.e. <code>Red</code>). Colors can also be derived from others with one of the many utility functions like <code>lighter</code>, <code>darker</code>, or by changing <code>opacity</code>.</p>
<code theme="darcula" mode="kotlin" data-highlight-only="true">package rendering

import io.nacular.doodle.drawing.Color
import io.nacular.doodle.drawing.darker
import io.nacular.doodle.drawing.opacity
import io.nacular.doodle.drawing.paint

fun colors() {
//sampleStart
    Color(0xff0000u                ) // create red
    Color(0xffffffu, opacity = 0.5f) // white with 0.5 opacity
    Color.Red                        // build-in red
    Color.Blue opacity 0.5f          // blue with 0.5 opacity
    Color.Blue.inverted              // inverse of blue
    Color.Lightgray.darker(0.5f)     // darker gray
    Color.Blue.paint                 // paint from a color
//sampleEnd
}</code>
<div class="theme-admonition theme-admonition-info admonition_xJq3 alert alert--info"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_BuS1"><p>Sometimes it is more effective to work within other color spaces. Doodle has built-in utilities for HSL and HSV colors, though these colors cannot be used directly for rendering. That said, there are many utilities for easily transforming between them and RGBA.</p><p>The <a href="/doodle/docs/ui_components/overview#colorpicker">ColorPicker</a> controls uses HSV internally for example.</p></div></div>
<p><code><a href="https://nacular.github.io/doodle-api/core/io.nacular.doodle.drawing/-color-paint" target="_blank" rel="noopener noreferrer">ColorPaint</a></code> is the simplest and most common way to fill a region. You can create one using the constructor, or via the <code><a href="https://nacular.github.io/doodle-api/core/io.nacular.doodle.drawing/paint" target="_blank" rel="noopener noreferrer">paint</a></code> extension on any <code><a href="https://nacular.github.io/doodle-api/core/io.nacular.doodle.drawing/-color" target="_blank" rel="noopener noreferrer">Color</a></code>.</p>
<div class="doodle_u3ra"><div style="position:relative;height:300px"></div></div>
<code theme="darcula" mode="kotlin" data-highlight-only="true">package rendering

import io.nacular.doodle.core.view
import io.nacular.doodle.drawing.Color
import io.nacular.doodle.drawing.paint

fun colorPaint(color: Color) {
//sampleStart
    view {
        render = {
            rect(bounds.atOrigin, color.paint)
        }
    }
//sampleEnd
}</code>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="gradients">Gradients<a href="#gradients" class="hash-link" aria-label="Direct link to Gradients" title="Direct link to Gradients">â€‹</a></h3>
<p>You can fill regions with <code><a href="https://nacular.github.io/doodle-api/core/io.nacular.doodle.drawing/-linear-gradient-paint" target="_blank" rel="noopener noreferrer">LinearGradientPaint</a></code>s, <code><a href="https://nacular.github.io/doodle-api/core/io.nacular.doodle.drawing/-radial-gradient-paint" target="_blank" rel="noopener noreferrer">RadialGradientPaint</a></code>s and <code><a href="https://nacular.github.io/doodle-api/core/io.nacular.doodle.drawing/-sweep-gradient-paint" target="_blank" rel="noopener noreferrer">SweepGradientPaint</a></code>s paints as well. These take a series of <code><a href="https://nacular.github.io/doodle-api/core/io.nacular.doodle.drawing/-color" target="_blank" rel="noopener noreferrer">Color</a></code>s and stop locations that are turned into a smoothly transitioning gradient across a shape.</p>
<div class="tabs-container tabList__CuJ"><ul role="tablist" aria-orientation="horizontal" class="tabs"><li role="tab" tabindex="0" aria-selected="true" class="tabs__item tabItem_LNqP tabs__item--active">Linear</li><li role="tab" tabindex="-1" aria-selected="false" class="tabs__item tabItem_LNqP">Radial</li><li role="tab" tabindex="-1" aria-selected="false" class="tabs__item tabItem_LNqP">Sweep</li></ul><div class="margin-top--md"><div role="tabpanel" class="tabItem_Ymn6"><div class="doodle_u3ra"><div style="position:relative;height:300px"></div></div><code theme="darcula" mode="kotlin" data-highlight-only="true">package rendering

import io.nacular.doodle.core.view
import io.nacular.doodle.drawing.Color
import io.nacular.doodle.drawing.GradientPaint.Stop
import io.nacular.doodle.drawing.LinearGradientPaint
import io.nacular.doodle.geometry.Point

/**
 * Example showing how to use [LinearGradientPaint]s.
 */
fun linearPaint(color1: Color, color2: Color, point1: Point, point2: Point) {
//sampleStart
    view {
        render = {
            // Simple version with 2 colors
            rect(bounds.atOrigin, LinearGradientPaint(
                color1,
                color2,
                point1,
                point2
            ))
        }
    }

    view {
        render = {
            // Also able to use a list of color stops
            rect(bounds.atOrigin, LinearGradientPaint(
                listOf(
                    Stop(color1, 0f  ),
                    Stop(color1, 1f/3),
                    // ...
                ),
                point1,
                point2
            ))
        }
    }
//sampleEnd
}</code></div><div role="tabpanel" class="tabItem_Ymn6" hidden=""><div class="doodle_u3ra"><div style="position:relative;height:300px"></div></div><code theme="darcula" mode="kotlin" data-highlight-only="true">package rendering

import io.nacular.doodle.core.view
import io.nacular.doodle.drawing.Color
import io.nacular.doodle.drawing.GradientPaint.Stop
import io.nacular.doodle.drawing.RadialGradientPaint
import io.nacular.doodle.geometry.Circle

/**
 * Example showing how to use [RadialGradientPaint]s.
 */
fun radialPaint(color1: Color, color2: Color, circle1: Circle, circle2: Circle) {
//sampleStart
    view {
        render = {
            // Simple version with 2 colors
            rect(bounds.atOrigin, RadialGradientPaint(
                color1,
                color2,
                circle1,
                circle2
            ))
        }
    }

    view {
        render = {
            // Also able to use a list of color stops
            rect(bounds.atOrigin, RadialGradientPaint(
                listOf(
                    Stop(color1, 0f  ),
                    Stop(color1, 1f/3),
                    // ...
                ),
                circle1,
                circle2
            ))
        }
    }
//sampleEnd
}</code></div><div role="tabpanel" class="tabItem_Ymn6" hidden=""><div class="doodle_u3ra"><div style="position:relative;height:300px"></div></div><code theme="darcula" mode="kotlin" data-highlight-only="true">package rendering

import io.nacular.doodle.core.view
import io.nacular.doodle.drawing.Color
import io.nacular.doodle.drawing.GradientPaint.Stop
import io.nacular.doodle.drawing.SweepGradientPaint
import io.nacular.doodle.geometry.Point
import io.nacular.measured.units.Angle
import io.nacular.measured.units.Measure

/**
 * Example showing how to use [SweepGradientPaint]s.
 */
fun sweepGradientPaint(color1: Color, color2: Color, center: Point, rotation: Measure&lt;Angle&gt;) {
//sampleStart
    view {
        render = {
            // Simple version with 2 colors
            rect(bounds.atOrigin, SweepGradientPaint(
                color1,
                color2,
                center,
                rotation
            ))
        }
    }

    view {
        render = {
            // Also able to use a list of color stops
            rect(
                bounds.atOrigin, SweepGradientPaint(
                    listOf(
                        Stop(color1, 0f),
                        Stop(color1, 1f / 3),
                        // ...
                    ),
                    center,
                    rotation
                )
            )
        }
    }
//sampleEnd
}</code></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="images">Images<a href="#images" class="hash-link" aria-label="Direct link to Images" title="Direct link to Images">â€‹</a></h3>
<p>Images can be used to fill regions with a repeating pattern. This paint takes an <code><a href="https://nacular.github.io/doodle-api/core/io.nacular.doodle.image/-image" target="_blank" rel="noopener noreferrer">Image</a></code> along with a size and opacity that image should be rendered at. The result is a repeating pattern that tiles the shape being filled.</p>
<div class="tabs-container tabList__CuJ"><ul role="tablist" aria-orientation="horizontal" class="tabs"><li role="tab" tabindex="0" aria-selected="true" class="tabs__item tabItem_LNqP tabs__item--active">Demo</li><li role="tab" tabindex="-1" aria-selected="false" class="tabs__item tabItem_LNqP">Code</li></ul><div class="margin-top--md"><div role="tabpanel" class="tabItem_Ymn6"><div class="doodle_u3ra"><div style="position:relative;height:300px"></div></div></div><div role="tabpanel" class="tabItem_Ymn6" hidden=""><code theme="darcula" mode="kotlin" data-highlight-only="true">package rendering

import io.nacular.doodle.core.view
import io.nacular.doodle.drawing.ImagePaint
import io.nacular.doodle.geometry.Size
import io.nacular.doodle.image.Image

fun imagePaint(image: Image, size: Size, opacity: Float) {
//sampleStart
    view {
        render = {
            rect(bounds.atOrigin, ImagePaint(image, size, opacity))
        }
    }
//sampleEnd
}</code></div></div></div>
<div class="theme-admonition theme-admonition-info admonition_xJq3 alert alert--info"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_BuS1"><p><code><a href="https://nacular.github.io/doodle-api/core/io.nacular.doodle.drawing/-image-paint" target="_blank" rel="noopener noreferrer">ImagePaint</a></code> does not allow any cropping of the provided image. But you can use <code><a href="https://nacular.github.io/doodle-api/core/io.nacular.doodle.drawing/-pattern-paint" target="_blank" rel="noopener noreferrer">PatternPaint</a></code> to do this.</p></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="patterns">Patterns<a href="#patterns" class="hash-link" aria-label="Direct link to Patterns" title="Direct link to Patterns">â€‹</a></h3>
<p>Sometimes you need to fill a region with a repeating pattern, like an image or some geometric shapes. This is easy to achieve with <code><a href="https://nacular.github.io/doodle-api/core/io.nacular.doodle.drawing/-image-paint" target="_blank" rel="noopener noreferrer">ImagePaint</a></code> (when an image is all you need) or <code><a href="https://nacular.github.io/doodle-api/core/io.nacular.doodle.drawing/-pattern-paint" target="_blank" rel="noopener noreferrer">PatternPaint</a></code>, when more sophisticated patterns are needed.</p>
<p><code>PatternPaint</code> has a &quot;render&quot; body that provides a powerful and familiar way of creating repeating patterns. You create one by specifying a <code>size</code> and a <code>paint</code> lambda, which has access to the full <code><a href="https://nacular.github.io/doodle-api/core/io.nacular.doodle.drawing/-canvas" target="_blank" rel="noopener noreferrer">Canvas</a></code> APIs.</p>
<p>This app uses <code><a href="https://nacular.github.io/doodle-api/core/io.nacular.doodle.drawing/striped-paint" target="_blank" rel="noopener noreferrer">StripedPaint</a></code> to show how a <code><a href="https://nacular.github.io/doodle-api/core/io.nacular.doodle.drawing/-pattern-paint" target="_blank" rel="noopener noreferrer">PatternPaint</a></code> can be transformed using <code><a href="https://nacular.github.io/doodle-api/core/io.nacular.doodle.drawing/-affine-transform2-d/" target="_blank" rel="noopener noreferrer">AffineTransform2D</a></code>, like rotated around its center for example.</p>
<div class="tabs-container tabList__CuJ"><ul role="tablist" aria-orientation="horizontal" class="tabs"><li role="tab" tabindex="0" aria-selected="true" class="tabs__item tabItem_LNqP tabs__item--active">Demo</li><li role="tab" tabindex="-1" aria-selected="false" class="tabs__item tabItem_LNqP">Code</li></ul><div class="margin-top--md"><div role="tabpanel" class="tabItem_Ymn6"><div class="doodle_u3ra"><div style="position:relative;height:300px"></div></div></div><div role="tabpanel" class="tabItem_Ymn6" hidden=""><code theme="darcula" mode="kotlin" data-highlight-only="true">package rendering

import io.nacular.doodle.core.View
import io.nacular.doodle.core.renderProperty
import io.nacular.doodle.drawing.AffineTransform.Companion.Identity
import io.nacular.doodle.drawing.Canvas
import io.nacular.doodle.drawing.Color.Companion.Red
import io.nacular.doodle.drawing.Color.Companion.White
import io.nacular.doodle.drawing.stripedPaint
import io.nacular.doodle.geometry.Point
import io.nacular.measured.units.Angle.Companion.degrees
import io.nacular.measured.units.times

// Doodle&#x27;s implementation of striped-paint looks something like this
/*
fun stripedPaint(
    stripeWidth : Double,
    evenRowColor: Color? = null,
    oddRowColor : Color? = null,
    transform   : AffineTransform2D = Identity
): PatternPaint = PatternPaint(Size(if (evenRowColor.visible || oddRowColor.visible) stripeWidth else 0.0, 2 * stripeWidth), transform) {
    evenRowColor?.let { rect(Rectangle(                  stripeWidth, stripeWidth), ColorPaint(it)) }
    oddRowColor?.let  { rect(Rectangle(0.0, stripeWidth, stripeWidth, stripeWidth), ColorPaint(it)) }
}
*/

//sampleStart
class SomeView: View() {
    private val stripeWidth = 20.0
    private var paintAngle by renderProperty(0 * degrees)

    override fun render(canvas: Canvas) {
        val paintCenter = Point(canvas.size.width / 2, canvas.size.height / 2)

        canvas.rect(bounds.atOrigin, stripedPaint(
            stripeWidth  = stripeWidth,
            evenRowColor = Red,
            oddRowColor  = White,
            transform    = Identity.rotate(around = paintCenter, by = paintAngle)
        ))
    }
}
//sampleEnd</code></div></div></div>
<code theme="darcula" mode="kotlin" data-highlight-only="true">package rendering

import io.nacular.doodle.core.view
import io.nacular.doodle.drawing.AffineTransform2D
import io.nacular.doodle.drawing.PatternPaint
import io.nacular.doodle.geometry.Size

fun patternPaint(size: Size, transform: AffineTransform2D) {
//sampleStart
    view {
        render = {
            rect(bounds.atOrigin, PatternPaint(size, transform) {
                // render onto canvas
                // rect(..)
            })
        }
    }
//sampleEnd
}</code>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="frosted-glass">Frosted Glass<a href="#frosted-glass" class="hash-link" aria-label="Direct link to Frosted Glass" title="Direct link to Frosted Glass">â€‹</a></h3>
<p>The <code><a href="https://nacular.github.io/doodle-api/core/io.nacular.doodle.drawing/-frosted-glass-paint" target="_blank" rel="noopener noreferrer">FrostedGlassPaint</a></code> lets you emulate the look of glass that blurs the contents below it. The paint takes a <code>blurRadius</code> and an optional <code><a href="https://nacular.github.io/doodle-api/core/io.nacular.doodle.drawing/-color" target="_blank" rel="noopener noreferrer">Color</a></code>.</p>
<div class="doodle_u3ra"><div style="position:relative;height:300px"></div></div>
<code theme="darcula" mode="kotlin" data-highlight-only="true">package rendering

import io.nacular.doodle.core.view
import io.nacular.doodle.drawing.Color.Companion.White
import io.nacular.doodle.drawing.FrostedGlassPaint
import io.nacular.doodle.drawing.opacity

/**
 * Example showing how to use [FrostedGlassPaint]s.
 */
fun frostedGlassPaint() {
//sampleStart
    view {
        render = {
            rect(bounds.atOrigin, FrostedGlassPaint(
                color      = White opacity 0.5f,
                blurRadius = 10.0
            ))
        }
    }
//sampleEnd
}</code>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="outlining-shapes-with-strokes">Outlining shapes with Strokes<a href="#outlining-shapes-with-strokes" class="hash-link" aria-label="Direct link to Outlining shapes with Strokes" title="Direct link to Outlining shapes with Strokes">â€‹</a></h2>
<p>Regions and curves can be stroked to give them an outline of some sort. The Canvas APIs also take <code><a href="https://nacular.github.io/doodle-api/core/io.nacular.doodle.drawing/-stroke" target="_blank" rel="noopener noreferrer">Stroke</a></code> parameters that determine how to outline the shape being rendered.</p>
<p>A <code>Stroke</code> combines the behavior of a <a href="/doodle/docs/rendering#filling-regions-with-paints">Paint</a> (but for the outline only) and adds several properties that govern how the outline is created.</p>
<div class="theme-admonition theme-admonition-info admonition_xJq3 alert alert--info"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_BuS1"><p>Strokes are centered along the edge of the shape the outline. This means adding a stroke will expand the area needed to render the shape by <code>stroke.thickness / 2</code> in the x and y direction. Keep this in mind, and shrink shapes accordingly to ensure outlines are not clipped and they appear where you want them to.</p></div></div>
<div class="doodle_u3ra"><div style="position:relative;height:300px"></div></div>
<code theme="darcula" mode="kotlin" data-highlight-only="true">package rendering

import io.nacular.doodle.core.view
import io.nacular.doodle.drawing.Paint
import io.nacular.doodle.drawing.Stroke
import io.nacular.doodle.drawing.Stroke.LineCap.Round
import io.nacular.doodle.drawing.Stroke.LineJoint.Miter

fun stroke(paint: Paint) {
//sampleStart
    view {
        render = {
            rect(bounds.atOrigin, stroke = Stroke(
                fill      = paint,
                dashes    = doubleArrayOf(10.0, 20.0),
                thickness = 2.5,
                lineCap   = Round,
                lineJoint = Miter
            ))
        }
    }
//sampleEnd
}</code>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="basic-shapes">Basic shapes<a href="#basic-shapes" class="hash-link" aria-label="Direct link to Basic shapes" title="Direct link to Basic shapes">â€‹</a></h2>
<p>The <code><a href="https://nacular.github.io/doodle-api/core/io.nacular.doodle.drawing/-canvas" target="_blank" rel="noopener noreferrer">Canvas</a></code> has APIs for drawing many basic shapes that foundation of most Views. Each shape can be filled with <code><a href="https://nacular.github.io/doodle-api/core/io.nacular.doodle.drawing/-paint" target="_blank" rel="noopener noreferrer">Paint</a></code> and outlined with <code><a href="https://nacular.github.io/doodle-api/core/io.nacular.doodle.drawing/-stroke" target="_blank" rel="noopener noreferrer">Stroke</a></code>s as well.</p>
<div class="tabs-container tabList__CuJ"><ul role="tablist" aria-orientation="horizontal" class="tabs"><li role="tab" tabindex="0" aria-selected="true" class="tabs__item tabItem_LNqP tabs__item--active">Rect</li><li role="tab" tabindex="-1" aria-selected="false" class="tabs__item tabItem_LNqP">Poly</li><li role="tab" tabindex="-1" aria-selected="false" class="tabs__item tabItem_LNqP">Circle</li><li role="tab" tabindex="-1" aria-selected="false" class="tabs__item tabItem_LNqP">Ellipse</li><li role="tab" tabindex="-1" aria-selected="false" class="tabs__item tabItem_LNqP">Arc</li><li role="tab" tabindex="-1" aria-selected="false" class="tabs__item tabItem_LNqP">Wedge</li></ul><div class="margin-top--md"><div role="tabpanel" class="tabItem_Ymn6"><div class="doodle_u3ra"><div style="position:relative;height:300px"></div></div><code theme="darcula" mode="kotlin" data-highlight-only="true">package rendering

import io.nacular.doodle.core.view
import io.nacular.doodle.drawing.Paint
import io.nacular.doodle.drawing.Stroke
import io.nacular.doodle.geometry.Rectangle

fun rect(rectangle: Rectangle, paint: Paint, stroke: Stroke) {
//sampleStart
    view {
        render = {
            rect(rectangle, fill = paint, stroke = stroke)
        }
    }
//sampleEnd
}</code><div class="theme-admonition theme-admonition-tip admonition_xJq3 alert alert--success"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>tip</div><div class="admonitionContent_BuS1"><p>A View&#x27;s bounds is relative to its parent, so you need to do bring it into the View&#x27;s coordinate space before drawing it to the Canvas. This is easy with <code>bounds.atOrigin</code>.</p></div></div></div><div role="tabpanel" class="tabItem_Ymn6" hidden=""><div class="doodle_u3ra"><div style="position:relative;height:300px"></div></div><code theme="darcula" mode="kotlin" data-highlight-only="true">package rendering

import io.nacular.doodle.core.view
import io.nacular.doodle.drawing.Paint
import io.nacular.doodle.drawing.Stroke
import io.nacular.doodle.geometry.Circle
import io.nacular.doodle.geometry.Polygon
import io.nacular.doodle.geometry.inscribed
import io.nacular.measured.units.Angle.Companion.degrees
import io.nacular.measured.units.times

fun poly(polygon: Polygon, circle: Circle, paint: Paint, stroke: Stroke) {
    // You can also create equilateral polygons by inscribing them
    // within circles.
    circle.inscribed(8, rotation = 45 * degrees)

//sampleStart
    view {
        render = {
            poly(polygon, fill = paint, stroke = stroke)
        }
    }
//sampleEnd
}</code><div class="theme-admonition theme-admonition-tip admonition_xJq3 alert alert--success"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>tip</div><div class="admonitionContent_BuS1"><p>You can also create equilateral polygons using the <code><a href="https://nacular.github.io/doodle-api/core/io.nacular.doodle.geometry/inscribed" target="_blank" rel="noopener noreferrer">EllipseInscribed</a></code> function on a <code><a href="https://nacular.github.io/doodle-api/core/io.nacular.doodle.geometry/-circle" target="_blank" rel="noopener noreferrer">Circle</a></code>:</p><div class="language-kotlin codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-kotlin codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">circle</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">inscribed</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">8</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> rotation </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">45</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">*</span><span class="token plain"> degrees</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div></div></div><div role="tabpanel" class="tabItem_Ymn6" hidden=""><div class="doodle_u3ra"><div style="position:relative;height:300px"></div></div><code theme="darcula" mode="kotlin" data-highlight-only="true">package rendering

import io.nacular.doodle.core.view
import io.nacular.doodle.drawing.Paint
import io.nacular.doodle.drawing.Stroke
import io.nacular.doodle.geometry.Circle
import io.nacular.doodle.geometry.Rectangle
import io.nacular.doodle.geometry.inscribedCircle

fun circle(circle: Circle, rectangle: Rectangle, paint: Paint, stroke: Stroke) {
    // You can also create circles based on Rectangles
    rectangle.inscribedCircle()

//sampleStart
    view {
        render = {
            circle(circle, fill = paint, stroke = stroke)
        }
    }
//sampleEnd
}</code><div class="theme-admonition theme-admonition-tip admonition_xJq3 alert alert--success"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>tip</div><div class="admonitionContent_BuS1"><p>Circles can be created from <code><a href="https://nacular.github.io/doodle-api/core/io.nacular.doodle.geometry/-rectangle" target="_blank" rel="noopener noreferrer">Rectangle</a></code>s, using the <code><a href="https://nacular.github.io/doodle-api/core/io.nacular.doodle.geometry/inscribed-circle" target="_blank" rel="noopener noreferrer">InscribedCircle</a></code> method:</p><div class="language-kotlin codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-kotlin codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">rectangle</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">inscribedCircle</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div></div></div><div role="tabpanel" class="tabItem_Ymn6" hidden=""><div class="doodle_u3ra"><div style="position:relative;height:300px"></div></div><code theme="darcula" mode="kotlin" data-highlight-only="true">package rendering

import io.nacular.doodle.core.view
import io.nacular.doodle.drawing.Paint
import io.nacular.doodle.drawing.Stroke
import io.nacular.doodle.geometry.Ellipse
import io.nacular.doodle.geometry.Rectangle
import io.nacular.doodle.geometry.inscribedEllipse

fun ellipse(ellipse: Ellipse, rectangle: Rectangle, paint: Paint, stroke: Stroke) {
    // You can also create ellipses based on Rectangles
    rectangle.inscribedEllipse()

//sampleStart
    view {
        render = {
            ellipse(ellipse, fill = paint, stroke = stroke)
        }
    }
//sampleEnd
}</code><div class="theme-admonition theme-admonition-tip admonition_xJq3 alert alert--success"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>tip</div><div class="admonitionContent_BuS1"><p>Ellipses can be created from <code><a href="https://nacular.github.io/doodle-api/core/io.nacular.doodle.geometry/-rectangle" target="_blank" rel="noopener noreferrer">Rectangle</a></code>s, using the <code><a href="https://nacular.github.io/doodle-api/core/io.nacular.doodle.geometry/inscribed-ellipse" target="_blank" rel="noopener noreferrer">InscribedEllipse</a></code> method:</p><div class="language-kotlin codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-kotlin codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">rectangle</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">inscribedEllipse</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div></div></div><div role="tabpanel" class="tabItem_Ymn6" hidden=""><div class="doodle_u3ra"><div style="position:relative;height:300px"></div></div><code theme="darcula" mode="kotlin" data-highlight-only="true">package rendering

import io.nacular.doodle.core.view
import io.nacular.doodle.drawing.Paint
import io.nacular.doodle.drawing.Stroke
import io.nacular.doodle.geometry.Point
import io.nacular.measured.units.Angle.Companion.degrees
import io.nacular.measured.units.Angle.Companion.radians
import io.nacular.measured.units.times
import kotlin.math.PI

fun arc(center: Point,  paint: Paint, stroke: Stroke) {
//sampleStart
    view {
        render = {
            arc(
                center   = center,
                radius   = 100.0,
                fill     = paint,
                stroke   = stroke,
                sweep    = 270 * degrees,
                rotation = PI * radians
            )
        }
    }
//sampleEnd
}</code></div><div role="tabpanel" class="tabItem_Ymn6" hidden=""><div class="doodle_u3ra"><div style="position:relative;height:300px"></div></div><code theme="darcula" mode="kotlin" data-highlight-only="true">package rendering

import io.nacular.doodle.core.view
import io.nacular.doodle.drawing.Paint
import io.nacular.doodle.drawing.Stroke
import io.nacular.doodle.geometry.Point
import io.nacular.measured.units.Angle.Companion.degrees
import io.nacular.measured.units.Angle.Companion.radians
import io.nacular.measured.units.times
import kotlin.math.PI

fun wedge(center: Point,  paint: Paint, stroke: Stroke) {
//sampleStart
    view {
        render = {
            wedge(
                center   = center,
                radius   = 100.0,
                fill     = paint,
                stroke   = stroke,
                sweep    = 270 * degrees,
                rotation = PI / 2 * radians
            )
        }
    }
//sampleEnd
}</code></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="paths">Paths<a href="#paths" class="hash-link" aria-label="Direct link to Paths" title="Direct link to Paths">â€‹</a></h2>
<p>Paths a really powerful primitives that let you create arbitrarily complex shapes that can be filled and stroked like those above. This flexibility comes from the fact that paths are fairly opaque components that behave almost like images.</p>
<p>A major difference with Paths is that they do not track their intrinsic size (though this can be obtained using a <code><a href="https://nacular.github.io/doodle-api/core/io.nacular.doodle.geometry/-path-metrics" target="_blank" rel="noopener noreferrer">PathMetrics</a></code>). This is a tradeoff that allows them to be created in a very light weight way. Paths can be transformed when rendered to a <code><a href="https://nacular.github.io/doodle-api/core/io.nacular.doodle.drawing/-canvas" target="_blank" rel="noopener noreferrer">Canvas</a></code> to adjust their size, position, etc.</p>
<div class="doodle_u3ra"><div style="position:relative;height:300px"></div></div>
<code theme="darcula" mode="kotlin" data-highlight-only="true">package rendering

import io.nacular.doodle.core.view
import io.nacular.doodle.drawing.Paint
import io.nacular.doodle.drawing.Stroke
import io.nacular.doodle.geometry.Circle
import io.nacular.doodle.geometry.Point
import io.nacular.doodle.geometry.inscribed
import io.nacular.doodle.geometry.path
import io.nacular.doodle.geometry.rounded

fun path(paint: Paint, stroke: Stroke) {
    // Path from SVG data
    val heart = path(&quot;M50,25 C35,0,-14,25,20,60 L50,90 L80,60 C114,20,65,0,50,25&quot;)!!

    // Star with rounded corners
    val star = Circle(
        radius = 100.0,
        center = Point(100, 100)
    ).inscribed(5)!!.rounded(radius = 10.0)

//sampleStart
    view {
        render = {
            // transform the Canvas to change path bounds, etc.
            path(star, fill = paint, stroke = stroke)
        }
    }
//sampleEnd
}</code>
<div class="theme-admonition theme-admonition-info admonition_xJq3 alert alert--info"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>Module Required</div><div class="admonitionContent_BuS1"><p>You must include the <span><code>PathModule</code> (<a href="https://nacular.github.io/doodle-api/browser/io.nacular.doodle.application/-modules/-companion/-path-module" target="_blank" rel="noopener noreferrer">Web</a>, <a href="https://nacular.github.io/doodle-api/desktop/io.nacular.doodle.application/-modules/-companion/-path-module" target="_blank" rel="noopener noreferrer">Desktop</a>)</span> in your application in order to use these features.</p><code theme="darcula" mode="kotlin" data-highlight-only="true">package rendering

import io.nacular.doodle.application.Application
import io.nacular.doodle.application.Modules.Companion.PathModule
import io.nacular.doodle.application.application
import io.nacular.doodle.core.Display
import io.nacular.doodle.geometry.PathMetrics
import org.kodein.di.instance

class PathApp(display: Display, pathMetrics: PathMetrics): Application {
    override fun shutdown() {}
}

fun pathModule() {
//sampleStart
    application(modules = listOf(PathModule)) {
        PathApp(display = instance(), pathMetrics = instance())
    }
//sampleEnd
}</code><p>Doodle uses opt-in modules like this to improve bundle size.</p></div></div>
<div class="theme-admonition theme-admonition-tip admonition_xJq3 alert alert--success"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>tip</div><div class="admonitionContent_BuS1"><p>There are may ways to create Paths.</p><code theme="darcula" mode="kotlin" data-highlight-only="true">package rendering

import io.nacular.doodle.geometry.Circle
import io.nacular.doodle.geometry.Path
import io.nacular.doodle.geometry.Point
import io.nacular.doodle.geometry.Rectangle
import io.nacular.doodle.geometry.map
import io.nacular.doodle.geometry.path
import io.nacular.doodle.geometry.toPath

fun pathCreation(start: Point, end: Point, width: Double, height: Double) {
//sampleStart
    // Just convert most geometric shapes into them:

    Circle().toPath()
    Rectangle().toPath()
    Rectangle().map { it * 2 }.toPath()

    // Use the path builder function:

    path(start)
        .cubicTo(
            Point(width / 2, height / 2),
            Point(width / 3,   0),
            Point(width / 2, -10)
        )
        .cubicTo(
            end,
            Point(width / 2, height + 10),
            Point(width * 2/3, height)
        ).finish() // or close

    // Or use a raw String:

    val path: Path? = path(&quot;...&quot;) // returns nullable since given string might be invalid
    val imSure      = path(&quot;...&quot;)!!
//sampleEnd
}</code></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="text">Text<a href="#text" class="hash-link" aria-label="Direct link to Text" title="Direct link to Text">â€‹</a></h2>
<div class="doodle_u3ra"><div style="position:relative;height:300px"></div></div>
<p>All text, whether single or multi-lined, is drawn directly to a <a href="/doodle/docs/rendering#the-canvas">Canvas</a> using the <code><a href="https://nacular.github.io/doodle-api/core/io.nacular.doodle.drawing/-common-canvas/text" target="_blank" rel="noopener noreferrer">text</a></code> and <code><a href="https://nacular.github.io/doodle-api/core/io.nacular.doodle.drawing/-common-canvas/wrapped" target="_blank" rel="noopener noreferrer">wrapped</a></code> methods. Text rendering is also explicit, with each API requiring a position within the <code>Canvas</code> and the <code><a href="https://nacular.github.io/doodle-api/core/io.nacular.doodle.drawing/-paint" target="_blank" rel="noopener noreferrer">Paint</a></code> used for filling (and/or <code><a href="https://nacular.github.io/doodle-api/core/io.nacular.doodle.drawing/-stroke" target="_blank" rel="noopener noreferrer">Stroke</a></code> used for outlining). The following View draw&#x27;s &quot;hello&quot; at <code>0,0</code> using the default font. But it is possible to change the font, letter, word and line spacing (for multi-lined text) as well.</p>
<code theme="darcula" mode="kotlin" data-highlight-only="true">package rendering

import io.nacular.doodle.core.view
import io.nacular.doodle.drawing.Color.Companion.Black
import io.nacular.doodle.drawing.text
import io.nacular.doodle.geometry.Point.Companion.Origin

fun text() {
    val textView = view {
//sampleStart
        render = {
            text(&quot;hello&quot;, Origin, color = Black)
        }
//sampleEnd
    }
}</code>
<p>You can draw wrapped text using <code><a href="https://nacular.github.io/doodle-api/core/io.nacular.doodle.drawing/-common-canvas/wrapped" target="_blank" rel="noopener noreferrer">wrapped</a></code>, which takes information about the width you&#x27;d like the text to occupy. Wrapped text also allows you to specify the line spacing, otherwise, it shares the same inputs as regular text.</p>
<div class="doodle_u3ra"><div style="position:relative;height:300px"></div></div>
<code theme="darcula" mode="kotlin" data-highlight-only="true">package io.nacular.doodle.docs.apps

import io.nacular.doodle.application.Application
import io.nacular.doodle.core.Display
import io.nacular.doodle.core.view
import io.nacular.doodle.docs.utils.controlBackgroundColor
import io.nacular.doodle.drawing.Color.Companion.Black
import io.nacular.doodle.drawing.Color.Companion.White
import io.nacular.doodle.drawing.paint
import io.nacular.doodle.drawing.width
import io.nacular.doodle.geometry.Point.Companion.Origin
import io.nacular.doodle.geometry.Size
import io.nacular.doodle.layout.constraints.constrain
import io.nacular.doodle.text.TextSpacing
import io.nacular.doodle.utils.Resizer

class MultiLinedTextApp(display: Display): Application {
    init {
        display += view {
//sampleStart
            val text = &quot;Lorem Ipsum is simply dummy text of the printing and typesetting industry. It has been the industry&#x27;s standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book.&quot;

            render = {
                rect(bounds.atOrigin, fill = White.paint)

                wrapped(
                    text        = text,
                    at          = Origin,
                    width       = this.width,
                    fill        = Black.paint,
                    textSpacing = TextSpacing(wordSpacing = 5.0, letterSpacing = 1.0),
                    lineSpacing = 1.2f
                )
            }
//sampleEnd

        }.apply {
            suggestSize(Size(400, 200))
            Resizer(this, movable = false)
        }

        display.fill(controlBackgroundColor.paint)
        display.layout = constrain(display.first()) {
            it.width  lessEq parent.width - 20
            it.center eq     parent.center
        }
    }

    override fun shutdown() {}
}</code>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="styled-text">Styled text<a href="#styled-text" class="hash-link" aria-label="Direct link to Styled text" title="Direct link to Styled text">â€‹</a></h3>
<p>You can also draw text (single and multi-line) that is styled using the <code><a href="https://nacular.github.io/doodle-api/core/io.nacular.doodle.text/-styled-text" target="_blank" rel="noopener noreferrer">StyledText</a></code> class and its DSLs.</p>
<div class="doodle_u3ra"><div style="position:relative;height:300px"></div></div>
<code theme="darcula" mode="kotlin" data-highlight-only="true">package io.nacular.doodle.docs.apps

import io.nacular.doodle.application.Application
import io.nacular.doodle.core.Display
import io.nacular.doodle.core.view
import io.nacular.doodle.docs.utils.DEFAULT_FONT_FAMILIES
import io.nacular.doodle.docs.utils.controlBackgroundColor
import io.nacular.doodle.drawing.Color.Companion.Red
import io.nacular.doodle.drawing.Color.Companion.White
import io.nacular.doodle.drawing.Color.Companion.Yellow
import io.nacular.doodle.drawing.FontLoader
import io.nacular.doodle.drawing.paint
import io.nacular.doodle.drawing.width
import io.nacular.doodle.geometry.Point.Companion.Origin
import io.nacular.doodle.geometry.Size
import io.nacular.doodle.layout.constraints.constrain
import io.nacular.doodle.text.Target.Background
import io.nacular.doodle.text.TextDecoration
import io.nacular.doodle.text.TextDecoration.Line.Under
import io.nacular.doodle.text.TextDecoration.Style.Wavy
import io.nacular.doodle.text.TextDecoration.Thickness.Absolute
import io.nacular.doodle.text.TextSpacing
import io.nacular.doodle.text.invoke
import io.nacular.doodle.utils.Resizer
import kotlinx.coroutines.CoroutineScope
import kotlinx.coroutines.launch

class StyledTextApp(display: Display, fonts: FontLoader, appScope: CoroutineScope): Application {
    init {
        appScope.launch {
            val bold = fonts {
                families = DEFAULT_FONT_FAMILIES
                weight   = 700
            }

            display += view {
//sampleStart
                val decoration = TextDecoration(
                    lines     = setOf(Under),
                    color     = Red,
                    thickness = Absolute(1.0),
                    style     = Wavy
                )

                val text = bold { &quot;Lorem Ipsum&quot; }..&quot; is simply &quot;..Yellow(Background) { &quot;dummy text&quot; }..
                        &quot; of the printing and typesetting industry. It has been the industry&#x27;s standard dummy text &quot;..
                        decoration { &quot;ever since the 1500s&quot; }..
                        &quot;, when an unknown printer took a galley of type and scrambled it to make a type specimen book.&quot;

                render = {
                    rect(bounds.atOrigin, fill = White.paint)

                    wrapped(
                        text        = text,
                        at          = Origin,
                        width       = width,
                        textSpacing = TextSpacing(wordSpacing = 5.0, letterSpacing = 1.0),
                        lineSpacing = 1.2f
                    )
                }
//sampleEnd
            }.apply {
                suggestSize(Size(400, 200))
                Resizer(this, movable = false)
            }

            display.fill(controlBackgroundColor.paint)
            display.layout = constrain(display.first()) {
                it.width  lessEq parent.width - 20
                it.center eq     parent.center
            }
        }
    }

    override fun shutdown() {}
}</code>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="fonts">Fonts<a href="#fonts" class="hash-link" aria-label="Direct link to Fonts" title="Direct link to Fonts">â€‹</a></h3>
<p>You can specify a font when drawing text or have Doodle fallback to the default. Fonts can be tricky, since they may not be present on the system at render time. This presents a race-condition for drawing text, since any text drawn with a Font that is simultaneously being loaded (or missing) can be shown in the wrong Font. This is what the <code><a href="https://nacular.github.io/doodle-api/core/io.nacular.doodle.drawing/-font-loader" target="_blank" rel="noopener noreferrer">FontLoader</a></code> is designed to help with.</p>
<p>It presents an asynchronous API for fetching Fonts so the app is explicitly made to deal with this.</p>
<div class="theme-admonition theme-admonition-info admonition_xJq3 alert alert--info"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>Module Required</div><div class="admonitionContent_BuS1"><p>You must include the <span><code>FontModule</code> (<a href="https://nacular.github.io/doodle-api/browser/io.nacular.doodle.application/-modules/-companion/-font-module" target="_blank" rel="noopener noreferrer">Web</a>, <a href="https://nacular.github.io/doodle-api/desktop/io.nacular.doodle.application/-modules/-companion/-font-module" target="_blank" rel="noopener noreferrer">Desktop</a>)</span> in your application in order to use these features.</p><code theme="darcula" mode="kotlin" data-highlight-only="true">package rendering

import io.nacular.doodle.application.Application
import io.nacular.doodle.application.Modules.Companion.FontModule
import io.nacular.doodle.application.application
import io.nacular.doodle.core.Display
import io.nacular.doodle.drawing.FontLoader
import org.kodein.di.instance

class FontLoaderApp(display: Display, fonts: FontLoader): Application {
    override fun shutdown() {}
}

fun main() {
//sampleStart
    application(modules = listOf(FontModule)) {
        FontLoaderApp(display = instance(), fonts = instance())
    }
//sampleEnd
}</code><p>Doodle uses opt-in modules like this to improve bundle size.</p></div></div>
<p>You can use <code><a href="https://nacular.github.io/doodle-api/core/io.nacular.doodle.drawing/-font-loader" target="_blank" rel="noopener noreferrer">FontLoader</a></code> to check the system asynchronously for a given font. This allows you to check for OS fonts, or fonts that have been loaded previously.</p>
<code theme="darcula" mode="kotlin" data-highlight-only="true">package rendering

import io.nacular.doodle.drawing.Font
import io.nacular.doodle.drawing.FontLoader
import kotlinx.coroutines.CoroutineScope
import kotlinx.coroutines.Deferred
import kotlinx.coroutines.async
import kotlinx.coroutines.coroutineScope

suspend fun systemFont(scope: CoroutineScope, fonts: FontLoader) = coroutineScope {
//sampleStart
    // launch a new coroutine for async font lookup
    val font: Deferred&lt;Font?&gt; = async {
        fonts {
            family = &quot;Roboto&quot;
            size   = 14
            weight = 400
        }
    }

    //...

    font.await()
//sampleEnd
}</code>
<p>You can also load a font from a file or url using <code><a href="https://nacular.github.io/doodle-api/core/io.nacular.doodle.drawing/-font-loader" target="_blank" rel="noopener noreferrer">FontLoader</a></code>. This is similar to finding a loaded font, but it takes a font file url.</p>
<code theme="darcula" mode="kotlin" data-highlight-only="true">package rendering

import io.nacular.doodle.drawing.Font
import io.nacular.doodle.drawing.FontLoader
import kotlinx.coroutines.async
import kotlinx.coroutines.coroutineScope

suspend fun fontUrl(fonts: FontLoader) = coroutineScope {
//sampleStart
    async {
        // Load this front from the file at &quot;urlToFont&quot;
        val font: Font? = fonts(&quot;urlToFont&quot;) {
            family = &quot;Roboto&quot;
            size   = 14
            weight = 400
        }
    }
//sampleEnd
}</code>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="handling-timeouts">Handling Timeouts<a href="#handling-timeouts" class="hash-link" aria-label="Direct link to Handling Timeouts" title="Direct link to Handling Timeouts">â€‹</a></h4>
<p>The <code><a href="https://nacular.github.io/doodle-api/core/io.nacular.doodle.drawing/-font-loader" target="_blank" rel="noopener noreferrer">FontLoader</a></code> uses Kotlin&#x27;s <code>suspend</code> functions for its async methods. <a href="https://kotlinlang.org/docs/reference/coroutines-overview.html" target="_blank" rel="noopener noreferrer">Coroutines</a> are a flexible way of dealing with async/await semantics. You can support timeouts using <code>launch</code> and canceling the resulting Job after some duration.</p>
<code theme="darcula" mode="kotlin" data-highlight-only="true">package rendering

import io.nacular.doodle.drawing.FontLoader
import io.nacular.doodle.scheduler.Scheduler
import io.nacular.measured.units.Time.Companion.seconds
import io.nacular.measured.units.times
import kotlinx.coroutines.coroutineScope
import kotlinx.coroutines.launch

suspend fun fontTimeout(fonts: FontLoader, scheduler: Scheduler) = coroutineScope {
//sampleStart
    // track loading job
    val fontJob = launch {
        // assigns the font when the job resolves
        val font = fonts {
            family = &quot;Roboto&quot;
            size   = 14
            weight = 400
        }
    }

    // Cancel the job after 5 seconds
    scheduler.after(5 * seconds) {
        if (!fontJob.isCancelled) {
            fontJob.cancel()
        }
    }
//sampleEnd
}</code>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="measuring-text">Measuring Text<a href="#measuring-text" class="hash-link" aria-label="Direct link to Measuring Text" title="Direct link to Measuring Text">â€‹</a></h3>
<p>All text is positioned explicitly when rendered to a <code>Canvas</code>. This means text alignments like centering etc., require knowledge of the text&#x27;s size. You can get this via a <code><a href="https://nacular.github.io/doodle-api/core/io.nacular.doodle.drawing/-text-metrics" target="_blank" rel="noopener noreferrer">TextMetrics</a></code>, which is available by default for injection into all apps.</p>
<p>This examples shows a <code>View</code> that draws some centered text based on the calculated size of the text.</p>
<code theme="darcula" mode="kotlin" data-highlight-only="true">package rendering

import io.nacular.doodle.application.Application
import io.nacular.doodle.application.application
import io.nacular.doodle.core.Display
import io.nacular.doodle.core.view
import io.nacular.doodle.drawing.Color.Companion.Black
import io.nacular.doodle.drawing.TextMetrics
import io.nacular.doodle.drawing.paint
import io.nacular.doodle.geometry.Point
import org.kodein.di.instance

class MyApp(display: Display, textMetrics: TextMetrics): Application {
    init {
//sampleStart
        display += view {
            val hello    = &quot;hello&quot;
            val textSize = textMetrics.size(hello) // cache text size

            render = {
                text(
                    text = hello,
                    at   = Point((width - textSize.width) / 2, (height - textSize.height) / 2),
                    fill = Black.paint
                )
            }
        }
//sampleEnd
    }
    override fun shutdown() {}
}

fun launch() {
    application {
        // TextMetrics is available to inject by default
        MyApp(display = instance(), textMetrics = instance())
    }
}</code>
<div class="theme-admonition theme-admonition-tip admonition_xJq3 alert alert--success"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>tip</div><div class="admonitionContent_BuS1"><p>The text location could be computed only when the View&#x27;s size changes, since render can be called even more frequently than that.</p></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="images-1">Images<a href="#images-1" class="hash-link" aria-label="Direct link to Images" title="Direct link to Images">â€‹</a></h2>
<p><code><a href="https://nacular.github.io/doodle-api/core/io.nacular.doodle.image/-image" target="_blank" rel="noopener noreferrer">Image</a></code>s are treated like primitive elements of the rendering pipeline. They are rendered directly to a <code><a href="https://nacular.github.io/doodle-api/core/io.nacular.doodle.drawing/-canvas" target="_blank" rel="noopener noreferrer">Canvas</a></code> like other shapes and text. This means transformations and other rendering capabilities apply to images as well.</p>
<p>You are able to define the rectangular region within an image that will be put onto the <code>Canvas</code>, as well as where on the <code>Canvas</code> that region will be placed. These two values allow you to zoom and scale images as you draw them.</p>
<div class="tabs-container tabList__CuJ"><ul role="tablist" aria-orientation="horizontal" class="tabs"><li role="tab" tabindex="0" aria-selected="true" class="tabs__item tabItem_LNqP tabs__item--active">Image</li><li role="tab" tabindex="-1" aria-selected="false" class="tabs__item tabItem_LNqP">Cropped</li><li role="tab" tabindex="-1" aria-selected="false" class="tabs__item tabItem_LNqP">Aspect Cropped</li></ul><div class="margin-top--md"><div role="tabpanel" class="tabItem_Ymn6"><div class="doodle_u3ra"><div style="position:relative;height:300px"></div></div><code theme="darcula" mode="kotlin" data-highlight-only="true">package io.nacular.doodle.docs.apps

import io.nacular.doodle.application.Application
import io.nacular.doodle.application.Modules.Companion.ImageModule
import io.nacular.doodle.application.Modules.Companion.PointerModule
import io.nacular.doodle.application.application
import io.nacular.doodle.core.Display
import io.nacular.doodle.core.center
import io.nacular.doodle.core.height
import io.nacular.doodle.core.view
import io.nacular.doodle.core.width
import io.nacular.doodle.docs.utils.controlBackgroundColor
import io.nacular.doodle.drawing.paint
import io.nacular.doodle.geometry.Rectangle
import io.nacular.doodle.geometry.Size
import io.nacular.doodle.geometry.centered
import io.nacular.doodle.image.ImageLoader
import io.nacular.doodle.utils.Resizer
import kotlinx.coroutines.CoroutineScope
import kotlinx.coroutines.Dispatchers
import kotlinx.coroutines.SupervisorJob
import kotlinx.coroutines.launch
import org.kodein.di.instance
import org.w3c.dom.HTMLElement
import kotlin.math.min

class ImageApp(
    display    : Display,
    imageLoader: ImageLoader,
    appScope   : CoroutineScope
): Application {
    init {
        appScope.launch {
//sampleStart
            val image = imageLoader.load(&quot;/doodle/images/photo.jpg&quot;) ?: return@launch

            display.children += view {
                render = {
                    image(image, destination = bounds.atOrigin)
                }

                Resizer(this)
            }
//sampleEnd

            display.fill(controlBackgroundColor.paint)

            when {
                display.size.empty -&gt; display.sizeChanged += { _,_,_ -&gt; setInitialBounds(display, image.size) }
                else               -&gt; setInitialBounds(display, image.size)
            }
        }
    }

    private fun setInitialBounds(display: Display, imageSize: Size) {
        with(display.first()) {
            if (size.empty &amp;&amp; !display.size.empty) {
                var w = min(display.width / 2, display.height - 40)
                var h = w * imageSize.height / imageSize.width

                if (h &gt; display.height - 40) {
                    h = display.height - 40
                    w = h * imageSize.width / imageSize.height
                }

                display.first().suggestBounds(Rectangle(w, h).centered(display.center))
            }
        }
    }

    override fun shutdown() {}

    companion object {
        private val appModules = listOf(PointerModule, ImageModule)

        operator fun invoke(root: HTMLElement) = application(root, modules = appModules) {
            ImageApp(instance(), instance(), CoroutineScope(SupervisorJob() + Dispatchers.Default))
        }
    }
}</code></div><div role="tabpanel" class="tabItem_Ymn6" hidden=""><div class="doodle_u3ra"><div style="position:relative;height:300px"></div></div><code theme="darcula" mode="kotlin" data-highlight-only="true">package io.nacular.doodle.docs.apps

import io.nacular.doodle.application.Application
import io.nacular.doodle.application.Modules.Companion.ImageModule
import io.nacular.doodle.application.Modules.Companion.PointerModule
import io.nacular.doodle.application.application
import io.nacular.doodle.core.Display
import io.nacular.doodle.core.center
import io.nacular.doodle.core.height
import io.nacular.doodle.core.view
import io.nacular.doodle.core.width
import io.nacular.doodle.docs.utils.controlBackgroundColor
import io.nacular.doodle.drawing.paint
import io.nacular.doodle.geometry.Rectangle
import io.nacular.doodle.geometry.centered
import io.nacular.doodle.geometry.div
import io.nacular.doodle.image.ImageLoader
import io.nacular.doodle.utils.Resizer
import kotlinx.coroutines.CoroutineScope
import kotlinx.coroutines.Dispatchers
import kotlinx.coroutines.SupervisorJob
import kotlinx.coroutines.launch
import org.kodein.di.instance
import org.w3c.dom.HTMLElement
import kotlin.math.min

class CroppedImageApp(
    display    : Display,
    imageLoader: ImageLoader,
    appScope   : CoroutineScope
): Application {
    init {
        appScope.launch {
//sampleStart
            val image = imageLoader.load(&quot;/doodle/images/photo.jpg&quot;) ?: return@launch

            display.children += view {
                render = {
                    image(image, source = Rectangle(image.size / 2), destination = bounds.atOrigin)
                }

                Resizer(this)
            }
//sampleEnd

            display.fill(controlBackgroundColor.paint)

            when {
                display.size.empty -&gt; display.sizeChanged += { _,_,_ -&gt; setInitialBounds(display) }
                else               -&gt; setInitialBounds(display)
            }
        }
    }

    private fun setInitialBounds(display: Display) {
        with(display.first()) {
            if (size.empty &amp;&amp; !display.size.empty) {
                display.first().suggestBounds(Rectangle(min(display.width / 2, display.height - 80)).centered(display.center))
            }
        }
    }

    override fun shutdown() {}

    companion object {
        private val appModules = listOf(PointerModule, ImageModule)

        operator fun invoke(root: HTMLElement) = application(root, modules = appModules) {
            CroppedImageApp(instance(), instance(), CoroutineScope(SupervisorJob() + Dispatchers.Default))
        }
    }
}</code></div><div role="tabpanel" class="tabItem_Ymn6" hidden=""><div class="doodle_u3ra"><div style="position:relative;height:300px"></div></div><code theme="darcula" mode="kotlin" data-highlight-only="true">package io.nacular.doodle.docs.apps

import io.nacular.doodle.application.Application
import io.nacular.doodle.application.Modules.Companion.ImageModule
import io.nacular.doodle.application.Modules.Companion.PointerModule
import io.nacular.doodle.application.application
import io.nacular.doodle.core.Display
import io.nacular.doodle.core.center
import io.nacular.doodle.core.height
import io.nacular.doodle.core.view
import io.nacular.doodle.core.width
import io.nacular.doodle.docs.utils.controlBackgroundColor
import io.nacular.doodle.drawing.Color.Companion.White
import io.nacular.doodle.drawing.opacity
import io.nacular.doodle.drawing.paint
import io.nacular.doodle.geometry.Point
import io.nacular.doodle.geometry.Rectangle
import io.nacular.doodle.geometry.centered
import io.nacular.doodle.geometry.div
import io.nacular.doodle.image.ImageLoader
import io.nacular.doodle.image.height
import io.nacular.doodle.image.width
import io.nacular.doodle.utils.Resizer
import kotlinx.coroutines.CoroutineScope
import kotlinx.coroutines.Dispatchers
import kotlinx.coroutines.SupervisorJob
import kotlinx.coroutines.launch
import org.kodein.di.instance
import org.w3c.dom.HTMLElement
import kotlin.math.min

class AspectCroppedImageApp(
    display    : Display,
    imageLoader: ImageLoader,
    appScope   : CoroutineScope
): Application {
    init {
        appScope.launch {
//sampleStart
            val image = imageLoader.load(&quot;/doodle/images/photo.jpg&quot;) ?: return@launch

            display.children += view {
                val aspect = image.width / image.height

                render = {
                    var h = height
                    var w = h * aspect

                    if (w &gt; width) {
                        w = width
                        h = w / aspect
                    }

                    rect(bounds.atOrigin, fill = (White opacity 0.75f).paint)

                    image(
                        image       = image,
                        source      = Rectangle(image.size / 2),
                        destination = Rectangle(w, h).centered(Point(width / 2, height / 2))
                    )
                }

                Resizer(this)
            }
//sampleEnd

            display.fill(controlBackgroundColor.paint)

            when {
                display.size.empty -&gt; display.sizeChanged += { _,_,_ -&gt; setInitialBounds(display) }
                else               -&gt; setInitialBounds(display)
            }
        }
    }

    private fun setInitialBounds(display: Display) {
        with(display.first()) {
            if (size.empty &amp;&amp; !display.size.empty) {
                display.first().suggestBounds(Rectangle(min(display.width / 2, display.height - 40)).centered(display.center))
            }
        }
    }

    override fun shutdown() {}

    companion object {
        private val appModules = listOf(PointerModule, ImageModule)

        operator fun invoke(root: HTMLElement) = application(root, modules = appModules) {
            AspectCroppedImageApp(instance(), instance(), CoroutineScope(SupervisorJob() + Dispatchers.Default))
        }
    }
}</code></div></div></div>
<div class="theme-admonition theme-admonition-tip admonition_xJq3 alert alert--success"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>tip</div><div class="admonitionContent_BuS1"><p>You can also control the corner radius, and opacity of the image being drawn.</p></div></div>
<p>You load <code><a href="https://nacular.github.io/doodle-api/core/io.nacular.doodle.image/-image" target="_blank" rel="noopener noreferrer">Image</a></code>s into your app using the <code><a href="https://nacular.github.io/doodle-api/core/io.nacular.doodle.image/-image-loader" target="_blank" rel="noopener noreferrer">ImageLoader</a></code>. This interface provides an async API for fetching images from different sources.</p>
<div class="theme-admonition theme-admonition-info admonition_xJq3 alert alert--info"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>Module Required</div><div class="admonitionContent_BuS1"><p>You must include the <span><code>ImageModule</code> (<a href="https://nacular.github.io/doodle-api/browser/io.nacular.doodle.application/-modules/-companion/-image-module" target="_blank" rel="noopener noreferrer">Web</a>, <a href="https://nacular.github.io/doodle-api/desktop/io.nacular.doodle.application/-modules/-companion/-image-module" target="_blank" rel="noopener noreferrer">Desktop</a>)</span> in your application in order to use these features.</p><code theme="darcula" mode="kotlin" data-highlight-only="true">package rendering

import io.nacular.doodle.application.Application
import io.nacular.doodle.application.Modules.Companion.ImageModule
import io.nacular.doodle.application.application
import io.nacular.doodle.core.Display
import io.nacular.doodle.image.ImageLoader
import org.kodein.di.instance

class ImageLoaderApp(display: Display, images: ImageLoader): Application {
    override fun shutdown() {}
}

fun imageLoader() {
//sampleStart
    application(modules = listOf(ImageModule)) {
        ImageLoaderApp(display = instance(), images = instance())
    }
//sampleEnd
}</code><p>Doodle uses opt-in modules like this to improve bundle size.</p></div></div>
<p><code><a href="https://nacular.github.io/doodle-api/core/io.nacular.doodle.image/-image-loader" target="_blank" rel="noopener noreferrer">ImageLoader</a></code> provides APIs for loading images from various sources, like urls, file-paths, and <code>LocalFiles</code> that are obtained during <a href="/doodle/docs/dragdrop">drag-drop</a> or via a <a href="/doodle/docs/ui_components/overview#fileselector">FileSelector</a>.</p>
<p>The following examples shows how loading works. Notice that <code>ImageLoader.load</code> returns <code>Image?</code>, which is <code>null</code> when the image fails to load for some reason. Fetching is also async, so it must be done from a <code>suspend</code> method or a <code>CoroutineScope</code>.</p>
<code theme="darcula" mode="kotlin" data-highlight-only="true">package rendering

import io.nacular.doodle.image.Image
import io.nacular.doodle.image.ImageLoader
import kotlinx.coroutines.CoroutineScope
import kotlinx.coroutines.launch

fun loadImage(imageLoader: ImageLoader, scope: CoroutineScope) {
//sampleStart
    scope.launch {
        val image: Image? = imageLoader.load(&quot;some_image_path&quot;)

        // won&#x27;t get here until load resolves
        image?.let {
            // ...
        }
    }
//sampleEnd
}</code>
<div class="theme-admonition theme-admonition-tip admonition_xJq3 alert alert--success"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>tip</div><div class="admonitionContent_BuS1"><p>See here for an example of how you might handle <a href="/doodle/docs/rendering#handling-timeouts">time-outs</a>.</p></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="efficient-rendering">Efficient rendering<a href="#efficient-rendering" class="hash-link" aria-label="Direct link to Efficient rendering" title="Direct link to Efficient rendering">â€‹</a></h2>
<p>Doodle optimizes rendering to avoid re-applying operations when drawing the same content repeatedly. For example, the <code>Timer</code> app below renders the epoch time every millisecond. However, Doodle only updates the changing regions (i.e. the DOM for Web apps), which is the text in this case. This reduces the amount of thrash in the DOM for Web apps.</p>
<div class="doodle_u3ra"><div style="position:relative;height:280px"></div></div>
<div class="tabs-container tabList__CuJ"><ul role="tablist" aria-orientation="horizontal" class="tabs"><li role="tab" tabindex="0" aria-selected="true" class="tabs__item tabItem_LNqP tabs__item--active">View DSL</li><li role="tab" tabindex="-1" aria-selected="false" class="tabs__item tabItem_LNqP">Render Property</li></ul><div class="margin-top--md"><div role="tabpanel" class="tabItem_Ymn6"><code theme="darcula" mode="kotlin" data-highlight-only="true">package timerdsl

import io.nacular.doodle.application.Application
import io.nacular.doodle.core.Display
import io.nacular.doodle.core.view
import io.nacular.doodle.drawing.Color.Companion.Black
import io.nacular.doodle.drawing.Color.Companion.Green
import io.nacular.doodle.drawing.Color.Companion.Red
import io.nacular.doodle.drawing.Stroke
import io.nacular.doodle.drawing.rect
import io.nacular.doodle.drawing.text
import io.nacular.doodle.geometry.Size
import io.nacular.doodle.scheduler.Scheduler
import io.nacular.doodle.time.Clock
import io.nacular.measured.units.Time.Companion.milliseconds
import io.nacular.measured.units.times

//sampleStart
class Timer(display: Display, clock: Clock, scheduler: Scheduler): Application {
    init {
        display += view {
            suggestSize(Size(200))

            scheduler.every(1 * milliseconds) {
                rerender()
            }

            render = {
                rect(bounds.at(x = 0.0, y = 20.0), color = Green)
                rect(bounds.atOrigin.inset(0.5), Stroke(Red))
                text(&quot;${clock.epoch}&quot;, color = Black)
            }
        }
    }

    override fun shutdown() {}
}
//sampleEnd</code></div><div role="tabpanel" class="tabItem_Ymn6" hidden=""><code theme="darcula" mode="kotlin" data-highlight-only="true">package timerrenderprop

import io.nacular.doodle.application.Application
import io.nacular.doodle.core.Display
import io.nacular.doodle.core.View
import io.nacular.doodle.core.renderProperty
import io.nacular.doodle.drawing.Canvas
import io.nacular.doodle.drawing.Color.Companion.Black
import io.nacular.doodle.drawing.Color.Companion.Green
import io.nacular.doodle.drawing.Color.Companion.Red
import io.nacular.doodle.drawing.Stroke
import io.nacular.doodle.drawing.rect
import io.nacular.doodle.drawing.text
import io.nacular.doodle.geometry.Size
import io.nacular.doodle.scheduler.Scheduler
import io.nacular.doodle.time.Clock
import io.nacular.measured.units.Time.Companion.milliseconds
import io.nacular.measured.units.times

//sampleStart
class Timer(display: Display, clock: Clock, scheduler: Scheduler): Application {
    init {
        display += object: View() {
            var time by renderProperty(clock.epoch)

            init {
                suggestSize(Size(200))

                scheduler.every(1 * milliseconds) {
                    time = clock.epoch
                }
            }

            override fun render(canvas: Canvas) {
                canvas.rect(bounds.at(x = 0.0, y = 20.0), color = Green)
                canvas.rect(bounds.atOrigin, Stroke(Red))
                canvas.text(&quot;$time&quot;, color = Black)
            }
        }
    }

    override fun shutdown() {}
}
//sampleEnd</code></div></div></div>
<div class="theme-admonition theme-admonition-info admonition_xJq3 alert alert--info"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_BuS1"><p>Doodle uses <a href="https://nacular.github.io/measured/" target="_blank" rel="noopener noreferrer">Measured</a> for time, angles etc.</p></div></div></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/doodle/docs/views"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Views</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/doodle/docs/layout"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Layout</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#the-canvas" class="table-of-contents__link toc-highlight">The Canvas</a><ul><li><a href="#transformations" class="table-of-contents__link toc-highlight">Transformations</a></li><li><a href="#3d-rendering" class="table-of-contents__link toc-highlight">3D rendering</a></li></ul></li><li><a href="#filling-regions-with-paints" class="table-of-contents__link toc-highlight">Filling regions with Paints</a><ul><li><a href="#colors" class="table-of-contents__link toc-highlight">Colors</a></li><li><a href="#gradients" class="table-of-contents__link toc-highlight">Gradients</a></li><li><a href="#images" class="table-of-contents__link toc-highlight">Images</a></li><li><a href="#patterns" class="table-of-contents__link toc-highlight">Patterns</a></li><li><a href="#frosted-glass" class="table-of-contents__link toc-highlight">Frosted Glass</a></li></ul></li><li><a href="#outlining-shapes-with-strokes" class="table-of-contents__link toc-highlight">Outlining shapes with Strokes</a></li><li><a href="#basic-shapes" class="table-of-contents__link toc-highlight">Basic shapes</a></li><li><a href="#paths" class="table-of-contents__link toc-highlight">Paths</a></li><li><a href="#text" class="table-of-contents__link toc-highlight">Text</a><ul><li><a href="#styled-text" class="table-of-contents__link toc-highlight">Styled text</a></li><li><a href="#fonts" class="table-of-contents__link toc-highlight">Fonts</a><ul><li><a href="#handling-timeouts" class="table-of-contents__link toc-highlight">Handling Timeouts</a></li></ul></li><li><a href="#measuring-text" class="table-of-contents__link toc-highlight">Measuring Text</a></li></ul></li><li><a href="#images-1" class="table-of-contents__link toc-highlight">Images</a></li><li><a href="#efficient-rendering" class="table-of-contents__link toc-highlight">Efficient rendering</a></li></ul></div></div></div></div></main></div></div></div><footer class="footer"><div class="container container-fluid"><div class="footer__bottom text--center"><div class="footer__copyright">Copyright Â© 2025 Nacular</div></div></div></footer></div>
</body>
</html>