<!doctype html>
<html class="docs-version-current" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.9">
<title data-react-helmet="true">Drag &amp; Drop | Doodle</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:image" content="https://nacular.github.io/doodle/doodle/img/doodle.png"><meta data-react-helmet="true" name="twitter:image" content="https://nacular.github.io/doodle/doodle/img/doodle.png"><meta data-react-helmet="true" property="og:url" content="https://nacular.github.io/doodle/doodle/docs/dragdrop"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_version" content="current"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" name="og:image:width" content="380"><meta data-react-helmet="true" name="og:image:height" content="78"><meta data-react-helmet="true" property="og:title" content="Drag &amp; Drop | Doodle"><meta data-react-helmet="true" name="description" content="Drag-and-drop is a form of data transfer between two Views or a View and an external component. The Views involved"><meta data-react-helmet="true" property="og:description" content="Drag-and-drop is a form of data transfer between two Views or a View and an external component. The Views involved"><link data-react-helmet="true" rel="shortcut icon" href="/doodle/img/favicon.png"><link data-react-helmet="true" rel="canonical" href="https://nacular.github.io/doodle/doodle/docs/dragdrop"><link data-react-helmet="true" rel="alternate" href="https://nacular.github.io/doodle/doodle/docs/dragdrop" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://nacular.github.io/doodle/doodle/docs/dragdrop" hreflang="x-default"><link rel="stylesheet" href="/doodle/assets/css/styles.b9d77e20.css">
<link rel="preload" href="/doodle/assets/js/runtime~main.051a204d.js" as="script">
<link rel="preload" href="/doodle/assets/js/main.32443a9a.js" as="script">
</head>
<body>
<script>!function(){function e(e){document.documentElement.setAttribute("data-theme",e)}var t=function(){var e=null;try{e=localStorage.getItem("theme")}catch(e){}return e}();null!==t?e(t):window.matchMedia("(prefers-color-scheme: dark)").matches?e("dark"):(window.matchMedia("(prefers-color-scheme: light)").matches,e("light"))}()</script><div id="__docusaurus">
<div><a href="#" class="skipToContent_OuoZ">Skip to main content</a></div><nav class="navbar navbar--fixed-top navbarHideable_RReh"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/doodle/"><div class="navbar__logo"><img src="/doodle/img/Doodle.svg" alt="Doodle Logo" class="themedImage_TMUO themedImage--light_4Vu1"><img src="/doodle/img/Doodle.svg" alt="Doodle Logo" class="themedImage_TMUO themedImage--dark_uzRr"></div></a><a class="navbar__item navbar__link navbar__link--active" href="/doodle/docs/introduction">Guide</a><a href="https://nacular.github.io/doodle-tutorials" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>Tutorials<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/nacular/doodle" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-github-link" aria-label="GitHub repository"></a><a href="https://kotlinlang.slack.com/messages/doodle" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-slack-link" aria-label="Slack channel"></a></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docs-wrapper docs-doc-page"><div class="docPage_lDyR"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_i9tI" type="button"></button><aside class="docSidebarContainer_0YBq"><div class="sidebar_a3j0 sidebarWithHideableNavbar_VlPv"><a tabindex="-1" class="sidebarLogo_hmkv" href="/doodle/"><img src="/doodle/img/Doodle.svg" alt="Doodle Logo" class="themedImage_TMUO themedImage--light_4Vu1"><img src="/doodle/img/Doodle.svg" alt="Doodle Logo" class="themedImage_TMUO themedImage--dark_uzRr"></a><nav class="menu thin-scrollbar menu_cyFh"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/doodle/docs/introduction">Hello Doodle</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/doodle/docs/installation">Installation</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/doodle/docs/applications">Applications</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/doodle/docs/views">Creating Views</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/doodle/docs/positioning">Positioning Views</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/doodle/docs/display">The Display</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Rendering</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Pointer Input</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/doodle/docs/keyboard">Keyboard Input</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" href="/doodle/docs/dragdrop">Drag &amp; Drop</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">UI Components</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/doodle/docs/themes">Themes</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/doodle/docs/accessibility">Accessibility</a></li></ul></nav><button type="button" title="Collapse sidebar" aria-label="Collapse sidebar" class="button button--secondary button--outline collapseSidebarButton_eoK2"><svg width="20" height="20" aria-hidden="true" class="collapseSidebarButtonIcon_e+kA"><g fill="#7a7a7a"><path d="M9.992 10.023c0 .2-.062.399-.172.547l-4.996 7.492a.982.982 0 01-.828.454H1c-.55 0-1-.453-1-1 0-.2.059-.403.168-.551l4.629-6.942L.168 3.078A.939.939 0 010 2.528c0-.548.45-.997 1-.997h2.996c.352 0 .649.18.828.45L9.82 9.472c.11.148.172.347.172.55zm0 0"></path><path d="M19.98 10.023c0 .2-.058.399-.168.547l-4.996 7.492a.987.987 0 01-.828.454h-3c-.547 0-.996-.453-.996-1 0-.2.059-.403.168-.551l4.625-6.942-4.625-6.945a.939.939 0 01-.168-.55 1 1 0 01.996-.997h3c.348 0 .649.18.828.45l4.996 7.492c.11.148.168.347.168.55zm0 0"></path></g></svg></button></div></aside><main class="docMainContainer_r8cw"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_zHA2"><div class="docItemContainer_oiyr"><article><div class="tocCollapsible_aw-L theme-doc-toc-mobile tocMobile_Tx6Y"><button type="button" class="clean-btn tocCollapsibleButton_zr6a">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Drag &amp; Drop</h1></header><p>Drag-and-drop is a form of data transfer between two Views or a View and an external component. The Views involved
can be within a single app, or separate apps; and the external component may be within a 3rd-party app entirely.</p><p>There key components involved in drag-and-drop sequence are: a <a href="https://github.com/nacular/doodle/blob/master/Core/src/commonMain/kotlin/io/nacular/doodle/datatransport/dragdrop/DragRecognizer.kt#L63" target="_blank" rel="noopener noreferrer"><code>DragRecognizer</code></a>
attached to a source View, <a href="https://github.com/nacular/doodle/blob/master/Core/src/commonMain/kotlin/io/nacular/doodle/datatransport/dragdrop/DropReceiver.kt#L20" target="_blank" rel="noopener noreferrer"><code>DropReceiver</code></a>
linked to a receiver View, and a <a href="https://github.com/nacular/doodle/blob/master/Core/src/commonMain/kotlin/io/nacular/doodle/datatransport/DataBundle.kt#L133" target="_blank" rel="noopener noreferrer"><code>DataBundle</code></a>.</p><div class="admonition admonition-tip alert alert--success"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="16" viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>tip</h5></div><div class="admonition-content"><p>Either the source or target might be external to the app, meaning there might not be a recognizer or receiver at play.</p></div></div><p>The operation occurs when the user pressed and drags the mouse within a drag-and-drop source, then drags the mouse
onto a target and releases the button. Data will be captured from the source and provided to the target, where it can decide
whether and how to accept it.</p><h2 class="anchor anchorWithHideOnScrollNavbar_3ly5" id="required-module">Required Module<a aria-hidden="true" class="hash-link" href="#required-module" title="Direct link to heading">​</a></h2><p>You must include the <a href="https://github.com/nacular/doodle/blob/master/Browser/src/jsMain/kotlin/io/nacular/doodle/application/Modules.kt#L87" target="_blank" rel="noopener noreferrer"><code>DragDropModule</code></a>
in your application in order to enable drag-and-drop. This module imports the <a href="https://github.com/nacular/doodle/blob/master/Browser/src/jsMain/kotlin/io/nacular/doodle/application/Modules.kt#L62" target="_blank" rel="noopener noreferrer"><code>PointerModule</code></a>
as well, so you do not need to do so.</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI kotlin"><pre tabindex="0" class="prism-code language-kotlin codeBlock_rtdJ thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#F8F8F2"><span class="token plain">import io.nacular.doodle.application.Modules.Companion.DragDropModule</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">// ...</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">fun main() {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    // Launch MyApp with drag-drop enabled</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    application(modules = setOf(DragDropModule /*,...*/)) {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        MyApp(/*...*/)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h2 class="anchor anchorWithHideOnScrollNavbar_3ly5" id="creating-a-source">Creating A Source<a aria-hidden="true" class="hash-link" href="#creating-a-source" title="Direct link to heading">​</a></h2><p>You can create a drag source by attaching a <code>DragRecognizer</code> to any <code>View</code>. The recognizer is responsible for initiating
the operation in response to a drag <a href="https://github.com/nacular/doodle/blob/master/Core/src/commonMain/kotlin/io/nacular/doodle/event/PointerEvent.kt#L10" target="_blank" rel="noopener noreferrer"><code>PointerEvent</code></a>.
This is done by implementing <code>dragRecognized</code>:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI kotlin"><pre tabindex="0" class="prism-code language-kotlin codeBlock_rtdJ thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#F8F8F2"><span class="token plain">interface DragRecognizer {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    fun dragRecognized(event: PointerEvent): DragOperation?</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>The operation begins whenever a receiver returns a non-null <a href="https://github.com/nacular/doodle/blob/master/Core/src/commonMain/kotlin/io/nacular/doodle/datatransport/dragdrop/DragRecognizer.kt#L14" target="_blank" rel="noopener noreferrer"><code>DragOperation</code></a>
from <code>dragRecognized</code>. The <code>DragOperation</code>
contains the transfer data, user action (copy, move, link), and visual used to provide feedback during the operation.
This object represents the entire lifecycle of the operation and is notified when dragging begins, completes, or is canceled.
This allows the source to update based on the outcome of the operation.</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI kotlin"><pre tabindex="0" class="prism-code language-kotlin codeBlock_rtdJ thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#F8F8F2"><span class="token plain">button.dragRecognizer = object: DragRecognizer {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">     override fun dragRecognized(event: PointerEvent) = object: DragOperation {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">         override val bundle         = textBundle(text)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">         override val allowedActions = setOf(Copy, Move)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">         override val visualOffset   = event.location</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">         override val visual         = object: Renderable {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">             override val size = Size(button.width, button.height * 2)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">             override fun render(canvas: Canvas) {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                canvas.text(text, color = Red)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">             }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">         }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">         override fun completed(action: Action) {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">             if (action == Move) text = &quot;&quot;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">         }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">     }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> }</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><div class="doodle_-SGP"><div style="position:relative;height:100px"></div></div><p>This is an example of a simple recognizer that allows the text from a button to be copied or moved to a target.</p><div class="admonition admonition-tip alert alert--success"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="16" viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>tip</h5></div><div class="admonition-content"><p>Having the <code>PointerEvent</code> that triggered the drag lets a recognizer decide which subregion in a View a drag can happen from.
It can also produce different data from different regions in a single View.</p></div></div><h2 class="anchor anchorWithHideOnScrollNavbar_3ly5" id="receiving-drops">Receiving Drops<a aria-hidden="true" class="hash-link" href="#receiving-drops" title="Direct link to heading">​</a></h2><p>You receive drops by attaching a <code>DropReceiver</code> to any <code>View</code>. Dragging the mouse over the receiver&#x27;s companion <code>View</code>
during a drag-and-rop triggers the <code>dropEnter</code> event. Subsequent mouse movement results in <code>dropOver</code> or <code>dropExit</code> events; and
releasing the mouse sends the <code>drop</code> event. Each of these events provide a <a href="https://github.com/nacular/doodle/blob/master/Core/src/commonMain/kotlin/io/nacular/doodle/datatransport/dragdrop/DropReceiver.kt#L9" target="_blank" rel="noopener noreferrer"><code>DropEvent</code></a>
with information about the data being transferred and the user&#x27;s intended action.</p><p>The <code>DropReceiver</code> indicates whether the current drop operation is allowed by returning <code>true</code> on any of these events. Or, it
can return <code>false</code> to signal the drop is not allowed.</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI kotlin"><pre tabindex="0" class="prism-code language-kotlin codeBlock_rtdJ thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#F8F8F2"><span class="token plain">button.dropReceiver = object: DropReceiver {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">     override val active = true</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">     private  fun allowed          (event: DropEvent) = PlainText in event.bundle</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">     override fun dropEnter        (event: DropEvent) = allowed(event)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">     override fun dropOver         (event: DropEvent) = allowed(event)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">     override fun dropActionChanged(event: DropEvent) = allowed(event)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">     override fun drop             (event: DropEvent) = event.bundle[PlainText]?.let { button.text = it; true } ?: false</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> }</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><div class="doodle_-SGP"><div style="position:relative;height:100px"></div></div><p>This is a simple receiver that accepts <a href="https://github.com/nacular/doodle/blob/master/Core/src/commonMain/kotlin/io/nacular/doodle/datatransport/DataBundle.kt#L84" target="_blank" rel="noopener noreferrer"><code>PlainText</code></a>
data and assigns it to the button&#x27;s text. Try dragging some text onto the button. You can even drag from the previous app&#x27;s button.</p><div class="admonition admonition-tip alert alert--success"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="16" viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>tip</h5></div><div class="admonition-content"><p>A <code>View</code> can be a source and target for drag-and-drop simultaneously.</p></div></div><h2 class="anchor anchorWithHideOnScrollNavbar_3ly5" id="data-bundles">Data Bundles<a aria-hidden="true" class="hash-link" href="#data-bundles" title="Direct link to heading">​</a></h2><p>The <code>DataBundle</code> class manages the underlying data that is transfered between the source and target. This interface
has two key methods: <code>contains</code> and <code>get</code>: both take a <a href="https://github.com/nacular/doodle/blob/master/Core/src/commonMain/kotlin/io/nacular/doodle/datatransport/DataBundle.kt#L45" target="_blank" rel="noopener noreferrer"><code>MimeType</code></a>.</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI kotlin"><pre tabindex="0" class="prism-code language-kotlin codeBlock_rtdJ thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#F8F8F2"><span class="token plain">interface DataBundle {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    operator fun &lt;T&gt; get     (type: MimeType&lt;T&gt;): T?</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    operator fun &lt;T&gt; contains(type: MimeType&lt;T&gt;): Boolean</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    //...</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>The <code>contains</code> method checks whether the bundle has data that matches the given mime-type, and <code>get</code> returns it.</p><h2 class="anchor anchorWithHideOnScrollNavbar_3ly5" id="event-sequence">Event Sequence<a aria-hidden="true" class="hash-link" href="#event-sequence" title="Direct link to heading">​</a></h2><p>The full sequence of events for an operation goes something like this:</p><div class="mermaid">sequenceDiagram
    autonumber
    participant s as Framework
    participant r as DragRecognizer
    participant o as DragOperation
    participant b as DataBundle
    participant p as DropReceiver

    s-&gt;&gt;r : dragRecognized
    r--&gt;&gt;s: DragOperation
    s-&gt;&gt;o : bundle, allowed actions, visual, ...
    s-&gt;&gt;p : dropEnter
    loop
        s-&gt;&gt;p : dropOver, [dropExit]
    end
    s-&gt;&gt;p : drop
    p-&gt;&gt;b : contains, invoke
    b--&gt;&gt;p: T
    s-&gt;&gt;o : completed</div><h2 class="anchor anchorWithHideOnScrollNavbar_3ly5" id="handling-dragged-files">Handling Dragged Files<a aria-hidden="true" class="hash-link" href="#handling-dragged-files" title="Direct link to heading">​</a></h2><p>Drag-and-drop also supports file transfer. This is handled via a <code>DropReceiver</code>--just like any other data type, with
the <a href="https://github.com/nacular/doodle/blob/master/Core/src/commonMain/kotlin/io/nacular/doodle/datatransport/DataBundle.kt#L98" target="_blank" rel="noopener noreferrer"><code>Files</code></a>
mime-type indicating which file types are allowed.</p><p>Try dragging files into the table below. The app will only allow files whose types are selected in the list. The <code>Files</code> mime-type
fetches a collection of files from the bundle, which allows a receiver to handle multiple files in a single drop.</p><div class="tabs-container"><ul role="tablist" aria-orientation="horizontal" class="tabs"><li role="tab" tabindex="0" aria-selected="true" class="tabs__item tabItem_vU9c tabs__item--active">Demo</li><li role="tab" tabindex="-1" aria-selected="false" class="tabs__item tabItem_vU9c">Drop Receiver</li></ul><div class="margin-vert--md"><div role="tabpanel"><div class="doodle_-SGP"><div style="position:relative;height:300px"></div></div></div><div role="tabpanel" hidden=""><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI kotlin"><pre tabindex="0" class="prism-code language-kotlin codeBlock_rtdJ thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#F8F8F2"><span class="token plain">object: DropReceiver {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    private val allowedFileTypes = // ...</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    override val active = true</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    private  fun allowed          (event: DropEvent) = allowedFileTypes in event.bundle</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    override fun dropEnter        (event: DropEvent) = allowed(event)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    override fun dropOver         (event: DropEvent) = allowed(event)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    override fun dropActionChanged(event: DropEvent) = allowed(event)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    override fun drop             (event: DropEvent) = event.bundle[allowedFileTypes]?.let { files -&gt;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        files.forEach {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            //...</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        true</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    } ?: false</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div></div></div></div></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/doodle/docs/keyboard"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">« <!-- -->Keyboard Input</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/doodle/docs/ui_components/overview"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Overview<!-- --> »</div></a></div></nav></div></div><div class="col col--3"><div class="tableOfContents_vrFS thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#required-module" class="table-of-contents__link toc-highlight">Required Module</a></li><li><a href="#creating-a-source" class="table-of-contents__link toc-highlight">Creating A Source</a></li><li><a href="#receiving-drops" class="table-of-contents__link toc-highlight">Receiving Drops</a></li><li><a href="#data-bundles" class="table-of-contents__link toc-highlight">Data Bundles</a></li><li><a href="#event-sequence" class="table-of-contents__link toc-highlight">Event Sequence</a></li><li><a href="#handling-dragged-files" class="table-of-contents__link toc-highlight">Handling Dragged Files</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Guide</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/doodle/docs/introduction">Introduction</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items"><li class="footer__item"><a href="https://kotlinlang.slack.com/messages/doodle" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Slack<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://twitter.com/nicholas_s_eddy" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Twitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items"><li class="footer__item"><a href="https://github.com/nacular/doodle" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div></div><div class="footer__bottom text--center"></div></div></footer></div>
<script src="/doodle/assets/js/runtime~main.051a204d.js"></script>
<script src="/doodle/assets/js/main.32443a9a.js"></script>
</body>
</html>