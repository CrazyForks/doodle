"use strict";(self.webpackChunkdoodle_docs=self.webpackChunkdoodle_docs||[]).push([[888],{515:(e,a,t)=>{t.r(a),t.d(a,{assets:()=>h,contentTitle:()=>m,default:()=>u,frontMatter:()=>r,metadata:()=>d,toc:()=>p});var n=t(7462),i=(t(7294),t(3905)),o=(t(8209),t(5488)),l=t(5162),s=t(4903);const r={hide_title:!0},m="Themes",d={unversionedId:"themes",id:"themes",title:"Themes",description:"Doodle apps can use Themes",source:"@site/docs/themes.mdx",sourceDirName:".",slug:"/themes",permalink:"/doodle/docs/themes",draft:!1,tags:[],version:"current",frontMatter:{hide_title:!0},sidebar:"tutorialSidebar",previous:{title:"Animations",permalink:"/doodle/docs/animations"},next:{title:"Accessibility",permalink:"/doodle/docs/accessibility"}},h={},p=[{value:"How Themes work",id:"how-themes-work",level:2},{value:"ThemeManager",id:"thememanager",level:2},{value:"Bundle Size",id:"bundle-size",level:2},{value:"Dynamic Themes",id:"dynamic-themes",level:2}],c={toc:p};function u(e){let{components:a,...t}=e;return(0,i.kt)("wrapper",(0,n.Z)({},c,t,{components:a,mdxType:"MDXLayout"}),(0,i.kt)("h1",{id:"themes"},"Themes"),(0,i.kt)("p",null,"Doodle apps can use ",(0,i.kt)("a",{parentName:"p",href:"https://github.com/nacular/doodle/blob/master/Core/src/commonMain/kotlin/io/nacular/doodle/theme/Theme.kt#L16"},(0,i.kt)("inlineCode",{parentName:"a"},"Themes")),"\nto create a consistent look and behavior across their Views. Doodle has built-in support for a Native and Basic theme\n(which has a light and dark variant). The ",(0,i.kt)("a",{parentName:"p",href:"https://github.com/nacular/doodle/blob/master/Browser/src/jsMain/kotlin/io/nacular/doodle/theme/native/NativeTheme.kt#L47"},(0,i.kt)("inlineCode",{parentName:"a"},"NativeTheme")),"\nstyles controls like buttons, text fields, and scroll panels using the system\ndefault styles and behaviors. The ",(0,i.kt)("a",{parentName:"p",href:"https://github.com/nacular/doodle/blob/master/Themes/src/commonMain/kotlin/io/nacular/doodle/theme/basic/BasicTheme.kt#L125"},(0,i.kt)("inlineCode",{parentName:"a"},"BasicTheme")),"\nprovides a customizable foundation to further build on."),(0,i.kt)(s.l,{functionName:"themes",height:"400",mdxType:"DoodleApp"}),(0,i.kt)("admonition",{title:"Library Required",type:"info"},(0,i.kt)("p",{parentName:"admonition"},"You will need to include the Themes library in your app's dependencies"),(0,i.kt)(o.Z,{groupId:"language",mdxType:"Tabs"},(0,i.kt)(l.Z,{value:"kotlin",label:"Kotlin",mdxType:"TabItem"},(0,i.kt)("pre",{parentName:"admonition"},(0,i.kt)("code",{parentName:"pre",className:"language-kotlin",metastring:"title=build.gradle.kts",title:"build.gradle.kts"},'// ...\n\ndependencies {\n    implementation ("io.nacular.doodle:themes:$doodleVersion")\n}\n\n// ...\n'))),(0,i.kt)(l.Z,{value:"groovy",label:"Groovy",mdxType:"TabItem"},(0,i.kt)("pre",{parentName:"admonition"},(0,i.kt)("code",{parentName:"pre",className:"language-groovy",metastring:"title=build.gradle",title:"build.gradle"},'// ...\n\ndependencies {\n    implementation "io.nacular.doodle:themes:$doodle_version"\n}\n\n// ...\n'))))),(0,i.kt)("h2",{id:"how-themes-work"},"How Themes work"),(0,i.kt)("p",null,"Themes implement a simple interface that allows them to process the entire View graph and apply style and behavior changes.\nThe API is as follows:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-kotlin"},"interface Theme {\n    fun install(display: Display, all: Sequence<View>)\n}\n")),(0,i.kt)("p",null,"Doodle calls the ",(0,i.kt)("inlineCode",{parentName:"p"},"install")," method when applying a Theme for the first time, and when Views are added to the Display after\ninstallation. It provides the ",(0,i.kt)("inlineCode",{parentName:"p"},"Display")," and a sequence of displayed Views. The Theme is free to customize both."),(0,i.kt)("h2",{id:"thememanager"},"ThemeManager"),(0,i.kt)("p",null,"Themes are handles by the ",(0,i.kt)("a",{parentName:"p",href:"https://github.com/nacular/doodle/blob/master/Core/src/commonMain/kotlin/io/nacular/doodle/theme/Theme.kt#L31"},(0,i.kt)("inlineCode",{parentName:"a"},"ThemeManager")),".\nIt provides an API for selecting the active Theme. Inject it into your app to work with Themes."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-kotlin",metastring:'title="MyApp.kt"',title:'"MyApp.kt"'},"import io.nacular.doodle.application.Application\nimport io.nacular.doodle.application.application\nimport io.nacular.doodle.theme.ThemeManager\nimport io.nacular.doodle.theme.native.NativeTheme\nimport io.nacular.doodle.theme.native.NativeTheme.Companion.NativeTheme\nimport org.kodein.di.instance\n\nclass MyApp(display: Display, manager: ThemeManager, theme: NativeTheme): Application {\n\n    init {\n        manager.selected = theme\n        // ...\n    }\n\n    override fun shutdown() {}\n}\n")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-kotlin",metastring:'title="main.kt"',title:'"main.kt"'},"fun main() {\n    application(modules = listOf(NativeTheme)) {\n        MyApp(display = instance(), manager = instance(), theme = instance())\n    }\n}\n")),(0,i.kt)("p",null,"This app installs the NativeTheme, which is available in a bundle of the same name. That bundle also includes the\ncommon ThemeModule, which provides access to the ThemeManager."),(0,i.kt)("h2",{id:"bundle-size"},"Bundle Size"),(0,i.kt)("p",null,"Themes can lead to larger bundle sizes than expected depending on how they are implemented. Take the following\nfor example."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-kotlin"},"class CustomTheme: Theme {\n    fun install(display: Display, all: Sequence<View>) = all.forEach {\n        when (it) {\n            is Slider      -> { it.behavior = /*...*/ }\n            is PushButton  -> { it.behavior = /*...*/ }\n            is ProgressBar -> { it.behavior = /*...*/ }\n            // ...\n        }\n    }\n}\n")),(0,i.kt)("admonition",{type:"caution"},(0,i.kt)("p",{parentName:"admonition"},"Themes defined this way are not very portable due to their heavy bundle cost")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-kotlin"},"class MyApp(display: Display, manager: ThemeManager, theme: CustomTheme): Application {\n\n    init {\n        manager.selected = theme\n\n        display += PushButton()\n    }\n}\n")),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"CustomTheme"),"'s static implementation leads to lots of dependencies that are not used in ",(0,i.kt)("inlineCode",{parentName:"p"},"MyApp"),". This includes the View\nand Behavior classes it uses."),(0,i.kt)("h2",{id:"dynamic-themes"},"Dynamic Themes"),(0,i.kt)("p",null,"Doodle addresses this concern with the ",(0,i.kt)("a",{parentName:"p",href:"https://github.com/nacular/doodle/blob/master/Themes/src/commonMain/kotlin/io/nacular/doodle/theme/adhoc/DynamicTheme.kt#L9"},(0,i.kt)("inlineCode",{parentName:"a"},"DynamicTheme")),".\nThis Theme uses dependency injection to discover the set of\nBehaviors that have been installed via Kodein Modules. It can filter that list down to those Behaviors associated\nwith it. This avoids hard dependencies on Views or Behaviors as a result."),(0,i.kt)("p",null,"DynamicThemes require explicit Behavior registration to work. The built-in Themes define a Module per Behavior to allow\narbitrary groupings within apps. These modules are defined using ",(0,i.kt)("a",{parentName:"p",href:"https://github.com/nacular/doodle/blob/master/Themes/src/commonMain/kotlin/io/nacular/doodle/theme/Modules.kt#L44"},(0,i.kt)("inlineCode",{parentName:"a"},"bindBehavior(...)")),",\nwhich takes a Theme class and binds a DynamicTheme that includes behaviors associated with that class."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-kotlin",metastring:'title="MyApp.kt"',title:'"MyApp.kt"'},"import io.nacular.doodle.application.Application\nimport io.nacular.doodle.application.application\nimport io.nacular.doodle.core.Display\nimport io.nacular.doodle.theme.ThemeManager\nimport io.nacular.doodle.theme.adhoc.DynamicTheme\nimport io.nacular.doodle.theme.native.NativeTheme.Companion.nativeButtonBehavior\nimport org.kodein.di.instance\n\nclass MyApp(display: Display, manager: ThemeManager, theme: DynamicTheme): Application {\n\n    init {\n        manager.selected = theme\n        // use buttons\n    }\n\n    override fun shutdown() {}\n}\n")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-kotlin",metastring:'title="main.kt"',title:'"main.kt"'},"fun main() {\n    // DynamicThemes require a list of Behavior modules since the\n    // Theme itself is essentially a Behavior filter.\n    // These modules are added to the list of app modules as follows\n    application(modules = listOf(nativeButtonBehavior(), /* other modules */)) {\n        MyApp(display = instance(), manager = instance(), theme = instance())\n    }\n}\n")),(0,i.kt)("admonition",{type:"tip"},(0,i.kt)("p",{parentName:"admonition"},"Include behavior modules at launch, so they can be used with a registered DynamicTheme.")),(0,i.kt)("p",null,"This app no longer has extraneous dependencies on things like ProgressBar and its Behavior."))}u.isMDXComponent=!0}}]);