<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-ui_components/form" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.1.1">
<title data-rh="true">Forms | Doodle</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://nacular.github.io/doodle/img/doodle.png"><meta data-rh="true" name="twitter:image" content="https://nacular.github.io/doodle/img/doodle.png"><meta data-rh="true" property="og:url" content="https://nacular.github.io/doodle/docs/ui_components/form"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="og:image:width" content="380"><meta data-rh="true" name="og:image:height" content="78"><meta data-rh="true" name="keywords" content="web, kotlin, javascript, framework, ui, user interface, programming, development, desktop"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Forms | Doodle"><meta data-rh="true" name="description" content="Forms"><meta data-rh="true" property="og:description" content="Forms"><link data-rh="true" rel="icon" href="/doodle/img/favicon.png"><link data-rh="true" rel="canonical" href="https://nacular.github.io/doodle/docs/ui_components/form"><link data-rh="true" rel="alternate" href="https://nacular.github.io/doodle/docs/ui_components/form" hreflang="en"><link data-rh="true" rel="alternate" href="https://nacular.github.io/doodle/docs/ui_components/form" hreflang="x-default"><link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=G-N4LZ5T22WN"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-N4LZ5T22WN",{anonymize_ip:!0})</script>



<script src="https://unpkg.com/kotlin-playground@1"></script><link rel="stylesheet" href="/doodle/assets/css/styles.957cdaf9.css">
<script src="/doodle/assets/js/runtime~main.471508f3.js" defer="defer"></script>
<script src="/doodle/assets/js/main.9e348a71.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return localStorage.getItem("theme")}catch(t){}}();null!==e?t(e):window.matchMedia("(prefers-color-scheme: dark)").matches?t("dark"):(window.matchMedia("(prefers-color-scheme: light)").matches,t("light"))}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/doodle/"><div class="navbar__logo"><img src="/doodle/img/doodle.svg" alt="Doodle Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/doodle/img/doodle.svg" alt="Doodle Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div></a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/nacular/doodle" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-github-link" aria-label="GitHub repository"></a><a href="https://kotlinlang.slack.com/messages/doodle" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-slack-link" aria-label="Slack channel"></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/doodle/docs/introduction">Hello Doodle</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/doodle/docs/installation">Installation</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/doodle/docs/whatsnew">Whats new in Doodle</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/doodle/docs/applications">Applications</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/doodle/docs/views">Views</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/doodle/docs/display">Displays</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/doodle/docs/rendering/overview">Rendering</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/doodle/docs/layouts/overview">Layouts</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/doodle/docs/transforms">Transforms</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/doodle/docs/animations">Animation</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/doodle/docs/user_input/pointer">User Input</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/doodle/docs/dragdrop">Drag • Drop</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/doodle/docs/modals">Popups • Modals</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/doodle/docs/themes">Themes</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" href="/doodle/docs/ui_components/overview">Component Library</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/doodle/docs/ui_components/overview">Catalog</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/doodle/docs/ui_components/form">Forms</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/doodle/docs/ui_components/form_controls">Form Controls</a></li></ul></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/doodle/docs/accessibility">Accessibility</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/doodle/docs/troubleshooting/gotchas">Troubleshoot</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a href="https://nacular.github.io/doodle-api/" target="_blank" rel="noopener noreferrer" class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false">Learn More</a></div></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/doodle/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Component Library</span><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Forms</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><h2 class="anchor anchorWithStickyNavbar_LWe7" id="forms">Forms<a href="#forms" class="hash-link" aria-label="Direct link to Forms" title="Direct link to Forms">​</a></h2>
<p>Doodle forms make data collection simple, while still preserving flexibility to build just the right experience. They hide a lot of the complexity associated with mapping visual components to fields, state management, and validation. The result is an intuitive metaphor modeled around the idea of a constructor.</p>
<div class="theme-admonition theme-admonition-info admonition_xJq3 alert alert--info"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>Library Required</div><div class="admonitionContent_BuS1"><p>You will need to add the <code>Controls</code> library to your app&#x27;s dependencies.</p><div class="tabs-container tabList__CuJ"><ul role="tablist" aria-orientation="horizontal" class="tabs"><li role="tab" tabindex="0" aria-selected="true" class="tabs__item tabItem_LNqP tabs__item--active">Kotlin</li><li role="tab" tabindex="-1" aria-selected="false" class="tabs__item tabItem_LNqP">Groovy</li></ul><div class="margin-top--md"><div role="tabpanel" class="tabItem_Ymn6"><p><strong>build.gradle.kts</strong></p><code theme="darcula" mode="kotlin" data-highlight-only="true">dependencies {
    implementation (&quot;io.nacular.doodle:controls:$doodleVersion&quot;)
}</code></div><div role="tabpanel" class="tabItem_Ymn6" hidden=""><p><strong>build.gradle</strong></p><code theme="darcula" mode="kotlin" data-highlight-only="true">//sampleStart
dependencies {
    implementation &quot;io.nacular.doodle:controls:$doodle_version&quot;
}
//sampleEnd</code></div></div></div></div></div>
<p>Doodle also has a set of helpful forms controls that cover a reasonable range of data-types. These make its easy to create forms without much hassle. But there are bound to be cases where more customization is needed. This is why Doodle forms are also extensible, allowing you to fully customize the data they bind to and how each fields is visualized.</p>
<div class="tabs-container tabList__CuJ"><ul role="tablist" aria-orientation="horizontal" class="tabs"><li role="tab" tabindex="0" aria-selected="true" class="tabs__item tabItem_LNqP tabs__item--active">Demo</li><li role="tab" tabindex="-1" aria-selected="false" class="tabs__item tabItem_LNqP">Usage</li></ul><div class="margin-top--md"><div role="tabpanel" class="tabItem_Ymn6"><div class="doodle_u3ra"><div style="position:relative;height:540px"></div></div></div><div role="tabpanel" class="tabItem_Ymn6" hidden=""><code theme="darcula" mode="kotlin" data-highlight-only="true">package controls

import controls.Gender.Female
import controls.Gender.Male
import io.nacular.doodle.controls.buttons.PushButton
import io.nacular.doodle.controls.form.Form
import io.nacular.doodle.controls.form.LabeledConfig
import io.nacular.doodle.controls.form.TextFieldConfig
import io.nacular.doodle.controls.form.form
import io.nacular.doodle.controls.form.labeled
import io.nacular.doodle.controls.form.radioList
import io.nacular.doodle.controls.form.textField
import io.nacular.doodle.controls.form.verticalLayout
import io.nacular.doodle.controls.text.TextField.Purpose
import io.nacular.doodle.controls.text.TextField.Purpose.Integer
import io.nacular.doodle.controls.text.TextField.Purpose.Text
import io.nacular.doodle.drawing.Color.Companion.Red
import io.nacular.doodle.drawing.Font
import io.nacular.doodle.geometry.Size
import io.nacular.doodle.text.StyledText
import io.nacular.doodle.text.invoke
import io.nacular.doodle.utils.ToStringIntEncoder

enum class Gender { Male, Female }

fun form(smallFont: Font) {
    fun &lt;T&gt; LabeledConfig.textFieldConfig(
        placeHolder: String      = &quot;&quot;,
        purpose    : Purpose     = Text,
        errorText  : StyledText? = null
    ): TextFieldConfig&lt;T&gt;.() -&gt; Unit = {
        val initialHelperText = help.styledText

        help.font             = smallFont
        textField.placeHolder = placeHolder
        textField.purpose     = purpose
        onValid               = { help.styledText = initialHelperText }
        onInvalid             = {
            if (!textField.hasFocus) {
                help.styledText = errorText ?: it.message?.let { Red(it) } ?: help.styledText
            }
        }
    }

    val submit = PushButton(&quot;Submit&quot;).apply {
        enabled = false
        size = Size(100, 32)
    }

    val twoDigitNumber = Regex(&quot;^1[0-5]\\d|^[1-9]\\d|^[1-9]&quot;)

//sampleStart
    val form = Form { this(
        +labeled(&quot;Name&quot;, help = &quot;3+ letters&quot;) {
            textField(Regex(&quot;.{3,}&quot;), config = textFieldConfig(&quot;Enter your name&quot;))
        },
        +labeled(&quot;Age&quot;, help = &quot;1 or 2 digit number&quot;) {
            textField(twoDigitNumber, ToStringIntEncoder, config = textFieldConfig(purpose = Integer))
        },
        Female to labeled(&quot;Gender&quot;) { radioList(Male, Female) { spacing = 12.0 } },
        +form { this(
            +labeled(&quot;Text [Sub-form]&quot;, help = &quot;Can be blank&quot;) {
                textField(Regex(&quot;.*&quot;), config = textFieldConfig())
            },
            +labeled(&quot;Number [Sub-form]&quot;, help = &quot;1 to 10&quot;) {
                textField(
                    twoDigitNumber,
                    ToStringIntEncoder,
                    validator = { it &lt;= 10 },
                    config    = textFieldConfig(purpose = Integer)
                )
            }
        ) { first, second -&gt;
            // nested Form creates a Pair&lt;String, Int&gt;
            first to second
        } },
        onInvalid = { submit.enabled = false },
    ) { name, age, gender, pair -&gt;
        submit.enabled = true
        println(&quot;[Form valid] Name: $name, Age: $age, Gender: $gender, Sub-form: $pair&quot;) // &lt;---- check console for output
    } }.apply {
        // configure the Form view itself
        size      = Size(300, 100)
        layout    = verticalLayout(this, spacing = 12.0, itemHeight = 32.0)
        focusable = false
    }
//sampleEnd
}</code></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="like-constructors">Like constructors<a href="#like-constructors" class="hash-link" aria-label="Direct link to Like constructors" title="Direct link to Like constructors">​</a></h2>
<p>Forms are very similar to constructors in that they have typed parameter lists (fields), and can only &quot;create&quot; instances when all their inputs are valid. Like any constructor, a Form can have optional fields, default values, and arbitrary types for its fields.</p>
<p>While Forms behave like constructors in most ways, they do not actually create instances (only <a href="/doodle/docs/ui_components/form#forms-as-fields">sub-forms</a> do). This means they are not typed. Instead, they take fields and output a corresponding lists of strongly-typed data when all their fields are valid. This notification is intentionally general to allow forms to be used in a wide range of used cases.</p>
<p>Forms are created using the <code><a href="https://nacular.github.io/doodle-api/controls/io.nacular.doodle.controls.form/form.html" target="_blank" rel="noopener noreferrer">form</a></code> DSL function. This function ensures strong typing for fields and the form&#x27;s &quot;output&quot;.</p>
<div class="theme-admonition theme-admonition-info admonition_xJq3 alert alert--info"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_BuS1"><p>The Form returned from the builder does not expose anything about the data it produces. So all consumption logic goes in the builder block.</p></div></div>
<code theme="darcula" mode="kotlin" data-highlight-only="true">package forms

import io.nacular.doodle.controls.form.Form
import io.nacular.doodle.controls.form.textField
import io.nacular.doodle.utils.ToStringIntEncoder

//sampleStart
val twoDigitNumber = Regex(&quot;^1[0-5]\\d|^[1-9]\\d|^[1-9]&quot;)

val form = Form { this(
    &quot;Mary&quot; to textField(),
    35     to textField(twoDigitNumber, ToStringIntEncoder),
    // ...
    onInvalid = {
        // called whenever any fields is updated with invalid data
    }) { name: String, age: Int, /*...*/ -&gt;
        // called each time all fields are updated with valid data
    }
}
//sampleEnd</code>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="fields">Fields<a href="#fields" class="hash-link" aria-label="Direct link to Fields" title="Direct link to Fields">​</a></h2>
<p>Each field defined in the <code><a href="https://nacular.github.io/doodle-api/controls/io.nacular.doodle.controls.form/-form" target="_blank" rel="noopener noreferrer">Form</a></code> will be bounded to a single <code><a href="https://nacular.github.io/doodle-api/core/io.nacular.doodle.core/-view" target="_blank" rel="noopener noreferrer">View</a></code>. These views are defined during field binding using a <code><a href="https://nacular.github.io/doodle-api/controls/io.nacular.doodle.controls.form/-field-visualizer" target="_blank" rel="noopener noreferrer">FieldVisualizer</a></code>. A visualizer is responsible for taking a <code><a href="https://nacular.github.io/doodle-api/controls/io.nacular.doodle.controls.form/-form/-field" target="_blank" rel="noopener noreferrer">Field</a></code> and its initial state and returning a View. The visualizer then acts as the bridge between the field&#x27;s state and the View, mapping changes made in the View to the field (this includes validating that input).</p>
<p>Fields store their data as <code><a href="https://nacular.github.io/doodle-api/controls/io.nacular.doodle.controls.form/-form/-field-state" target="_blank" rel="noopener noreferrer">FieldState</a></code>. This is a strongly-typed value that can be <code><a href="https://nacular.github.io/doodle-api/controls/io.nacular.doodle.controls.form/-form/-valid" target="_blank" rel="noopener noreferrer">Valid</a></code> or <code><a href="https://nacular.github.io/doodle-api/controls/io.nacular.doodle.controls.form/-form/-invalid" target="_blank" rel="noopener noreferrer">Invalid</a></code>. Valid state contains a value, while invalid state does not. A Form with any invalid fields is invalid itself, and will indicate this by calling <code>onInvalid</code>.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="creating-fields">Creating fields<a href="#creating-fields" class="hash-link" aria-label="Direct link to Creating fields" title="Direct link to Creating fields">​</a></h3>
<p>Fields are created implicitly when FieldVisualizers are bound to a Form. These visualizers can be created using the <code><a href="https://nacular.github.io/doodle-api/controls/io.nacular.doodle.controls.form/-form/-field" target="_blank" rel="noopener noreferrer">Field</a></code> DSL, by implementing the interface, or by one of the existing form controls.</p>
<div class="tabs-container tabList__CuJ"><ul role="tablist" aria-orientation="horizontal" class="tabs"><li role="tab" tabindex="0" aria-selected="true" class="tabs__item tabItem_LNqP tabs__item--active">DSL</li><li role="tab" tabindex="-1" aria-selected="false" class="tabs__item tabItem_LNqP">Interface</li></ul><div class="margin-top--md"><div role="tabpanel" class="tabItem_Ymn6"><code theme="darcula" mode="kotlin" data-highlight-only="true">package forms

import io.nacular.doodle.controls.form.field
import io.nacular.doodle.core.view

fun &lt;T&gt; fieldDsl() {
//sampleStart
    field&lt;T&gt; {
        initial // initial state of the field
        state   // mutable state of the field

        view {} // view to display for the field
    }
//sampleEnd
}</code></div><div role="tabpanel" class="tabItem_Ymn6" hidden=""><code theme="darcula" mode="kotlin" data-highlight-only="true">package forms

import io.nacular.doodle.controls.form.FieldInfo
import io.nacular.doodle.controls.form.FieldVisualizer
import io.nacular.doodle.core.View
import io.nacular.doodle.core.view

//sampleStart
class MyVisualizer&lt;T&gt;: FieldVisualizer&lt;T&gt; {
    override fun invoke(fieldInfo: FieldInfo&lt;T&gt;): View {
        fieldInfo.initial // initial state of the field
        fieldInfo.state   // mutable state of the field

        return view {}    // view to display for the field
    }
}
//sampleEnd</code></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="field-binding">Field binding<a href="#field-binding" class="hash-link" aria-label="Direct link to Field binding" title="Direct link to Field binding">​</a></h3>
<p>Fields all have an optional initial value. Therefore, each field can be bounded either with a value or without one. The result is 2 different ways of adding a field to a Form.</p>
<p>The following shows how to bind fields that has no default value.</p>
<code theme="darcula" mode="kotlin" data-highlight-only="true">package forms

import io.nacular.doodle.controls.form.Form
import io.nacular.doodle.controls.form.field
import io.nacular.doodle.controls.form.textField
import io.nacular.doodle.core.view
import io.nacular.doodle.utils.ToStringIntEncoder

fun &lt;T&gt; noDefaults() {
//sampleStart
    data class Person(val name: String, val age: Int)

    val form = Form { this(
        + textField(),
        + textField(encoder = ToStringIntEncoder),
        + field&lt;Person&gt; { view {} },
        // ...
        onInvalid = {}
    ) { text: String, number: Int, person: Person -&gt;
        // ...
    } }
//sampleEnd
}</code>
<p>This shows how to bind using initial values.</p>
<code theme="darcula" mode="kotlin" data-highlight-only="true">package forms

import io.nacular.doodle.controls.form.Form
import io.nacular.doodle.controls.form.field
import io.nacular.doodle.controls.form.textField
import io.nacular.doodle.core.view
import io.nacular.doodle.utils.ToStringIntEncoder

fun &lt;T&gt; withDefaults() {
//sampleStart
    data class Person(val name: String, val age: Int)

    val form = Form { this(
        &quot;Hello&quot;            to textField(),
        4                  to textField(encoder = ToStringIntEncoder),
        Person(&quot;Jack&quot;, 55) to field { view {} },
        // ...
        onInvalid = {}
    ) { text: String, number: Int, person: Person -&gt;
        // ...
    } }
//sampleEnd
}</code>
<div class="theme-admonition theme-admonition-tip admonition_xJq3 alert alert--success"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>tip</div><div class="admonitionContent_BuS1"><p>These examples bind fields that have no names. Doodle has a <a href="/doodle/docs/ui_components/form_controls#labeled"><code>labeled</code></a> form control that wraps a control and assigns a name to it.</p></div></div>
<div class="theme-admonition theme-admonition-info admonition_xJq3 alert alert--info"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_BuS1"><p>Note that a visualizer may set a field&#x27;s state to some valid value at initialization time. This will give the same effect as that field having had a initial value specified that the visualizer accepted.</p></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="forms-as-fields">Forms as fields<a href="#forms-as-fields" class="hash-link" aria-label="Direct link to Forms as fields" title="Direct link to Forms as fields">​</a></h3>
<p>Forms can also have nested forms within them. This is helpful when the field has complex data that can be presented to the user as a set of components. Such cases can be handled with custom visualizers, but many work well using a nested form.</p>
<p>Nested forms are created using the <code><a href="https://nacular.github.io/doodle-api/controls/io.nacular.doodle.controls.form/form.html" target="_blank" rel="noopener noreferrer">form</a></code> DSL. It works just like the top-level <code>Form</code> DSL, but it actually <strong>creates an instance</strong> and has access to the initial value it is bound to (if any).</p>
<div class="tabs-container tabList__CuJ"><ul role="tablist" aria-orientation="horizontal" class="tabs"><li role="tab" tabindex="0" aria-selected="true" class="tabs__item tabItem_LNqP tabs__item--active">Demo</li><li role="tab" tabindex="-1" aria-selected="false" class="tabs__item tabItem_LNqP">Usage</li></ul><div class="margin-top--md"><div role="tabpanel" class="tabItem_Ymn6"><div class="doodle_u3ra"><div style="position:relative;height:400px"></div></div></div><div role="tabpanel" class="tabItem_Ymn6" hidden=""><code theme="darcula" mode="kotlin" data-highlight-only="true">package forms

import io.nacular.doodle.controls.form.Form
import io.nacular.doodle.controls.form.form
import io.nacular.doodle.controls.form.labeled
import io.nacular.doodle.controls.form.map
import io.nacular.doodle.controls.form.textField
import io.nacular.doodle.controls.text.TextField.Purpose.Integer
import io.nacular.doodle.controls.text.TextField.Purpose.Telephone
import io.nacular.doodle.utils.ToStringIntEncoder

fun &lt;T&gt; formFields() {
//sampleStart
    data class Person(val name: String, val age: Int)

    val form = Form { this(
        + labeled(&quot;Text&quot;     ) { textField(                            )                                   },
        + labeled(&quot;Telephone&quot;) { textField(encoder = ToStringIntEncoder) { textField.purpose = Telephone } },
        Person(&quot;Jack&quot;, 55) to form { this(
            initial.map { it.name } to labeled(&quot;Name&quot;) { textField(                            )                                 },
            initial.map { it.age  } to labeled(&quot;Age&quot; ) { textField(encoder = ToStringIntEncoder) { textField.purpose = Integer } },
            onInvalid = {}
        ) { name, age -&gt;
            Person(name, age) // construct person when valid
        } },
        // ...
        onInvalid = {}
    ) { text: String, number: Int, person: Person -&gt;
        // called each time all fields are updated with valid data
    } }
//sampleEnd
}</code></div></div></div>
<div class="theme-admonition theme-admonition-tip admonition_xJq3 alert alert--success"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>tip</div><div class="admonitionContent_BuS1"><p>Nested forms can be used with or without initial values like any other field.</p></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="layouts">Layouts<a href="#layouts" class="hash-link" aria-label="Direct link to Layouts" title="Direct link to Layouts">​</a></h2>
<p>Forms allow you to position their fields via a <code><a href="https://nacular.github.io/doodle-api/core/io.nacular.doodle.core/-layout" target="_blank" rel="noopener noreferrer">Layout</a></code> just like other containers. This positionable items seen by the layout will correspond to the fields bound to the Form in the same order. All the examples in this documentation use a vertical layout via the <code><a href="https://nacular.github.io/doodle-api/controls/io.nacular.doodle.controls.form/vertical-layout.html" target="_blank" rel="noopener noreferrer">verticalLayout</a></code> helper.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="more-than-5-fields">More than 5 fields?<a href="#more-than-5-fields" class="hash-link" aria-label="Direct link to More than 5 fields?" title="Direct link to More than 5 fields?">​</a></h2>
<p>The <code><a href="https://nacular.github.io/doodle-api/controls/io.nacular.doodle.controls.form/form.html" target="_blank" rel="noopener noreferrer">form</a></code> DSLs have variants for up to 5 fields, as well as a version that takes an arbitrary number of fields, but does not provide strongly typed data back. This is by design. Forms are generally easier to use if they are shorter. Nonetheless, you can achieve this with a bit of extra work.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="group-related-fields-into-objects">Group related fields into objects<a href="#group-related-fields-into-objects" class="hash-link" aria-label="Direct link to Group related fields into objects" title="Direct link to Group related fields into objects">​</a></h3>
<p>The recommended approach is to try and group related data together so you reduce the number of fields within your Forms. This is a good practice in general, since it defines the semantics of your data right when they are collected. It is also easy to achieve with nested <code>form</code> fields.</p>
<div class="tabs-container tabList__CuJ"><ul role="tablist" aria-orientation="horizontal" class="tabs"><li role="tab" tabindex="0" aria-selected="true" class="tabs__item tabItem_LNqP tabs__item--active">Demo</li><li role="tab" tabindex="-1" aria-selected="false" class="tabs__item tabItem_LNqP">Usage</li></ul><div class="margin-top--md"><div role="tabpanel" class="tabItem_Ymn6"><div class="doodle_u3ra"><div style="position:relative;height:600px"></div></div></div><div role="tabpanel" class="tabItem_Ymn6" hidden=""><code theme="darcula" mode="kotlin" data-highlight-only="true">package forms

import io.nacular.doodle.controls.form.Form
import io.nacular.doodle.controls.form.form
import io.nacular.doodle.controls.form.labeled
import io.nacular.doodle.controls.form.textField
import io.nacular.doodle.controls.text.TextField.Purpose.Telephone

fun groupingFields() {
    data class Address(
        val number: String,
        val street: String,
        val city  : String,
        val state : String,
        val zip   : String
    )

    data class ContactInfo(
        val telephone: String,
        val address  : Address,
    )

    data class PersonalInfo(
        val name   : String,
        val contact: ContactInfo
    )

    val notEmpty = Regex(&quot;.+&quot;)

//sampleStart
    val form = Form { this(
        + labeled(&quot;Name&quot;) { textField(notEmpty) },
        + form { this(
            + labeled(&quot;Telephone&quot;) { textField(notEmpty) { textField.purpose = Telephone } },
            + form&lt;Address&gt; { this(
                + labeled(&quot;Number&quot;) { textField(notEmpty) },
                + labeled(&quot;Street&quot;) { textField(notEmpty) },
                + labeled(&quot;City&quot;  ) { textField(notEmpty) },
                + labeled(&quot;State&quot; ) { textField(notEmpty) },
                + labeled(&quot;Zip&quot;   ) { textField(notEmpty) },
            ) { number, street, city, state, zip -&gt;
                Address(number, street, city, state, zip)
            } },
        ) { telephone, address -&gt;
            ContactInfo(telephone, address)
        } },
        onInvalid = {}
    ) { name, contact -&gt;
        println(&quot;Personal Info: ${PersonalInfo(name, contact)}&quot;)
    } }
//sampleEnd
}
</code></div></div></div>
<p>This app takes 2 top level fields for the user&#x27;s name and contact info. Contact info this obtained using a sub <code>form</code> that produces an object. That object in turn contains a telephone and address. The latter is itself a data object that is obtained using a nested form as well.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="use-list-destructuring--casting">Use list destructuring + casting<a href="#use-list-destructuring--casting" class="hash-link" aria-label="Direct link to Use list destructuring + casting" title="Direct link to Use list destructuring + casting">​</a></h3>
<p>The other approach is using <code>List</code> <a href="https://stackoverflow.com/questions/55890980/kotlin-destructuring-more-than-five-components" target="_blank" rel="noopener noreferrer">destructuring</a> to pull out the results of the untyped version of the <code><a href="https://nacular.github.io/doodle-api/controls/io.nacular.doodle.controls.form/form.html" target="_blank" rel="noopener noreferrer">form</a></code> DSL. The form above can also be achieved by defining the 6 and 7 component destructors and then casting each element to the correct type.</p>
<code theme="darcula" mode="kotlin" data-highlight-only="true">package forms

import io.nacular.doodle.controls.form.Form
import io.nacular.doodle.controls.form.labeled
import io.nacular.doodle.controls.form.textField
import io.nacular.doodle.controls.text.TextField.Purpose.Telephone

fun destructuring() {

    data class PersonalInfo(
        val name     : String,
        val telephone: String,
        val number   : String,
        val street   : String,
        val city     : String,
        val state    : String,
        val zip      : String
    )

    val notEmpty = Regex(&quot;.+&quot;)

//sampleStart
    operator fun &lt;E&gt; List&lt;E&gt;.component6() = this[5]
    operator fun &lt;E&gt; List&lt;E&gt;.component7() = this[6]

    val form = Form { this(
        + labeled(&quot;Name&quot;     ) { textField(notEmpty) },
        + labeled(&quot;Telephone&quot;) { textField(notEmpty) { textField.purpose = Telephone } },
        + labeled(&quot;Number&quot;   ) { textField(notEmpty) },
        + labeled(&quot;Street&quot;   ) { textField(notEmpty) },
        + labeled(&quot;City&quot;     ) { textField(notEmpty) },
        + labeled(&quot;State&quot;    ) { textField(notEmpty) },
        + labeled(&quot;Zip&quot;      ) { textField(notEmpty) },
        onInvalid = {},
    ) { (name, telephone, number, street, city, state, zip) -&gt;
        println(&quot;Personal Info: ${PersonalInfo(
            name      as String, // Cast required for all fields
            telephone as String,
            number    as String,
            street    as String,
            city      as String,
            state     as String,
            zip       as String
        )}&quot;)
    } }

//sampleEnd
}

</code>
<div class="theme-admonition theme-admonition-caution admonition_xJq3 alert alert--warning"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>caution</div><div class="admonitionContent_BuS1"><p>This approach is sometimes more concise than the sub form approach, but it is <strong>discouraged</strong> b/c it introduces brittleness due to the casting.</p></div></div></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/doodle/docs/ui_components/overview"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Catalog</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/doodle/docs/ui_components/form_controls"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Form Controls</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#forms" class="table-of-contents__link toc-highlight">Forms</a></li><li><a href="#like-constructors" class="table-of-contents__link toc-highlight">Like constructors</a></li><li><a href="#fields" class="table-of-contents__link toc-highlight">Fields</a><ul><li><a href="#creating-fields" class="table-of-contents__link toc-highlight">Creating fields</a></li><li><a href="#field-binding" class="table-of-contents__link toc-highlight">Field binding</a></li><li><a href="#forms-as-fields" class="table-of-contents__link toc-highlight">Forms as fields</a></li></ul></li><li><a href="#layouts" class="table-of-contents__link toc-highlight">Layouts</a></li><li><a href="#more-than-5-fields" class="table-of-contents__link toc-highlight">More than 5 fields?</a><ul><li><a href="#group-related-fields-into-objects" class="table-of-contents__link toc-highlight">Group related fields into objects</a></li><li><a href="#use-list-destructuring--casting" class="table-of-contents__link toc-highlight">Use list destructuring + casting</a></li></ul></li></ul></div></div></div></div></main></div></div></div><footer class="footer"><div class="container container-fluid"><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2024 Nacular</div></div></div></footer></div>
</body>
</html>