"use strict";(self.webpackChunkdoodle_docs=self.webpackChunkdoodle_docs||[]).push([[7601],{2132:(e,n,o)=>{o.r(n),o.d(n,{assets:()=>g,contentTitle:()=>m,default:()=>b,frontMatter:()=>u,metadata:()=>i,toc:()=>v});const i=JSON.parse('{"id":"troubleshooting/gotchas","title":"Where\'s My View?","description":"The following app has a single top-level view that fills the Display and draws a centered circle.","source":"@site/docs/troubleshooting/gotchas.mdx","sourceDirName":"troubleshooting","slug":"/troubleshooting/gotchas","permalink":"/doodle/docs/troubleshooting/gotchas","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{"hide_title":true,"title":"Where\'s My View?"},"sidebar":"tutorialSidebar","previous":{"title":"Form Controls","permalink":"/doodle/docs/ui_components/form_controls"},"next":{"title":"Desktop","permalink":"/doodle/docs/platform_specific/desktop"}}');var t=o(4848),a=o(8453),r=(o(5537),o(9329),o(9030),o(7269)),l=o(4069),s=o(9172);const d="package simplecircle\n\nimport io.nacular.doodle.application.Application\nimport io.nacular.doodle.application.application\nimport io.nacular.doodle.core.Display\nimport io.nacular.doodle.core.center\nimport io.nacular.doodle.core.height\nimport io.nacular.doodle.core.view\nimport io.nacular.doodle.core.width\nimport io.nacular.doodle.drawing.Color.Companion.Red\nimport io.nacular.doodle.drawing.Color.Companion.White\nimport io.nacular.doodle.drawing.paint\nimport io.nacular.doodle.geometry.Circle\nimport org.kodein.di.instance\nimport kotlin.math.min\n\n//sampleStart\nclass SimpleCircle(display: Display): Application {\n    init {\n        display += view {\n            suggestSize(display.size)\n\n            render = {\n                circle(\n                    Circle(\n                    center = display.center,\n                    radius = min(display.width, display.height) / 2 - 10\n                ), fill = Red.paint)\n            }\n        }\n\n        display.fill(White.paint)\n    }\n\n    override fun shutdown() {}\n}\n\nfun main() {\n    application {\n        SimpleCircle(display = instance())\n    }\n}\n//sampleEnd",p="package invisiblebutton\n\nimport io.nacular.doodle.application.Application\nimport io.nacular.doodle.application.application\nimport io.nacular.doodle.controls.buttons.PushButton\nimport io.nacular.doodle.core.Display\nimport io.nacular.doodle.drawing.Color.Companion.White\nimport io.nacular.doodle.drawing.paint\nimport io.nacular.doodle.geometry.Size\nimport org.kodein.di.instance\n\n//sampleStart\nclass InvisibleButton(display: Display): Application {\n    init {\n        // NOTE: This does not render because the button has no\n        // Behavior installed\n        display += PushButton().apply { suggestSize(Size(40, 20)) }\n        display.fill(White.paint)\n    }\n\n    override fun shutdown() {}\n}\n\nfun main() {\n    application {\n        InvisibleButton(display = instance())\n    }\n}\n//sampleEnd",h='package buttonwiththeme\n\nimport io.nacular.doodle.application.Application\nimport io.nacular.doodle.application.Modules.Companion.PointerModule\nimport io.nacular.doodle.application.application\nimport io.nacular.doodle.controls.buttons.PushButton\nimport io.nacular.doodle.core.Display\nimport io.nacular.doodle.docs.apps.ButtonWithTheme\nimport io.nacular.doodle.drawing.Color.Companion.White\nimport io.nacular.doodle.drawing.paint\nimport io.nacular.doodle.geometry.Size\nimport io.nacular.doodle.layout.constraints.center\nimport io.nacular.doodle.layout.constraints.constrain\nimport io.nacular.doodle.theme.Theme\nimport io.nacular.doodle.theme.ThemeManager\nimport io.nacular.doodle.theme.native.NativeTheme.Companion.nativeButtonBehavior\nimport org.kodein.di.instance\n\n//sampleStart\nclass ButtonWithTheme(display: Display, themeManager: ThemeManager, theme: Theme): Application {\n    init {\n        // install theme that provides a button behavior\n        themeManager.selected = theme\n\n        display += PushButton("Hi").apply { suggestSize(Size(80, 40)) }\n        display.layout = constrain(display.first(), center)\n        display.fill(White.paint)\n    }\n\n    override fun shutdown() {}\n}\n\nfun main() {\n    application(modules = listOf(PointerModule, nativeButtonBehavior())) {\n        ButtonWithTheme(\n            display      = instance(),\n            themeManager = instance(),\n            theme        = instance()\n        )\n    }\n}\n//sampleEnd',c='package buttonwithbehavior\n\nimport io.nacular.doodle.application.Application\nimport io.nacular.doodle.application.Modules.Companion.PointerModule\nimport io.nacular.doodle.application.application\nimport io.nacular.doodle.controls.buttons.PushButton\nimport io.nacular.doodle.controls.theme.simpleButtonRenderer\nimport io.nacular.doodle.core.Display\nimport io.nacular.doodle.drawing.Color.Companion.Lightgray\nimport io.nacular.doodle.drawing.Color.Companion.White\nimport io.nacular.doodle.drawing.darker\nimport io.nacular.doodle.drawing.paint\nimport io.nacular.doodle.geometry.Size\nimport io.nacular.doodle.layout.constraints.center\nimport io.nacular.doodle.layout.constraints.constrain\nimport org.kodein.di.instance\n\n//sampleStart\nclass ButtonWithBehavior(display: Display): Application {\n    init {\n        display += PushButton("Hi").apply {\n            suggestSize(Size(80, 40))\n\n            // Assign a Behavior to the button to handle rendering\n            behavior = simpleButtonRenderer { button, canvas ->\n                var color = Lightgray\n\n                if (button.model.pressed    ) color = color.darker(0.25f)\n                if (button.model.pointerOver) color = color.darker(0.25f)\n\n                canvas.rect(button.bounds.atOrigin, radius = 10.0, fill = color.paint)\n            }\n\n//            acceptsThemes = false // prevents any theme from overriding behavior\n        }\n        display.layout = constrain(display.first(), center)\n        display.fill(White.paint)\n    }\n\n    override fun shutdown() {}\n}\n\nfun main() {\n    // PointerModule required to support mouse/touch\n    application(modules = listOf(PointerModule)) {\n        ButtonWithBehavior(display = instance())\n    }\n}\n//sampleEnd',u={hide_title:!0,title:"Where's My View?"},m="Where's my view?",g={},v=[{value:"Where is my Button?",id:"where-is-my-button",level:2},{value:"Setting a Behavior fixes the button",id:"setting-a-behavior-fixes-the-button",level:2},{value:"A Theme could also be used",id:"a-theme-could-also-be-used",level:2}];function y(e){const n={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",header:"header",p:"p",...(0,a.R)(),...e.components};return s.F||f("api",!1),s.F.Behavior||f("api.Behavior",!0),s.F.ButtonBehavior||f("api.ButtonBehavior",!0),s.F.NativeButtonBehavior||f("api.NativeButtonBehavior",!0),s.F.PushButton||f("api.PushButton",!0),s.F.Theme||f("api.Theme",!0),s.F.ThemeManager||f("api.ThemeManager",!0),(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.header,{children:(0,t.jsx)(n.h1,{id:"wheres-my-view",children:"Where's my view?"})}),"\n",(0,t.jsx)(n.p,{children:"The following app has a single top-level view that fills the Display and draws a centered circle."}),"\n",(0,t.jsx)(l.v,{children:d}),"\n",(0,t.jsx)(r.T,{functionName:"simpleCircle",height:"200"}),"\n",(0,t.jsx)(n.h2,{id:"where-is-my-button",children:"Where is my Button?"}),"\n",(0,t.jsxs)(n.p,{children:["Now we try the same thing with a ",(0,t.jsx)(s.F.PushButton,{}),". The following code feels like it should work; but it doesn't."]}),"\n",(0,t.jsx)(l.v,{children:p}),"\n",(0,t.jsx)(r.T,{functionName:"invisibleButton",height:"200"}),"\n",(0,t.jsx)(n.admonition,{type:"danger",children:(0,t.jsxs)(n.p,{children:["The above examples does not render anything because ",(0,t.jsx)(s.F.PushButton,{})," delegates all rendering to its ",(0,t.jsx)(s.F.ButtonBehavior,{})," and the button has none specified."]})}),"\n",(0,t.jsxs)(n.h2,{id:"setting-a-behavior-fixes-the-button",children:["Setting a ",(0,t.jsx)(n.a,{href:"../theming#behaviors",children:"Behavior"})," fixes the button"]}),"\n",(0,t.jsxs)(n.p,{children:["The above example does not render anything because the button has no ",(0,t.jsx)(s.F.Behavior,{})," installed. ",(0,t.jsx)(s.F.PushButton,{})," (like many Views in the ",(0,t.jsx)(n.code,{children:"controls"})," library) does not render directly itself, but relies on its ",(0,t.jsx)(s.F.ButtonBehavior,{})," for all drawing."]}),"\n",(0,t.jsxs)(n.p,{children:["So we can fix the above app by explicitly adding a ",(0,t.jsx)(s.F.Behavior,{})," to the button."]}),"\n",(0,t.jsx)(l.v,{children:c}),"\n",(0,t.jsx)(r.T,{functionName:"buttonWithBehavior",height:"200"}),"\n",(0,t.jsxs)(n.h2,{id:"a-theme-could-also-be-used",children:["A ",(0,t.jsx)(n.a,{href:"../theming#themes",children:"Theme"})," could also be used"]}),"\n",(0,t.jsxs)(n.p,{children:["Themes are a great way to assign behaviors to your entire app all at once. In this version we register the ",(0,t.jsx)(s.F.NativeButtonBehavior,{})," module which makes a ",(0,t.jsx)(s.F.Theme,{})," available that will assign a native button behavior to all buttons in the app by default. This theme is injected into the app along with the ",(0,t.jsx)(s.F.ThemeManager,{})," which is used to select the theme. The result is that our button now has a behavior and delegates all rendering to it."]}),"\n",(0,t.jsx)(l.v,{children:h}),"\n",(0,t.jsx)(r.T,{functionName:"buttonWithTheme",height:"200"})]})}function b(e={}){const{wrapper:n}={...(0,a.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(y,{...e})}):y(e)}function f(e,n){throw new Error("Expected "+(n?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}}}]);